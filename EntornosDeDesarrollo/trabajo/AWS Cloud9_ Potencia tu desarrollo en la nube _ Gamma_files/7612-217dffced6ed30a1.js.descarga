"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7612],{93148:function(n,e,t){t.d(e,{A:function(){return u}});var o=t(12741),r=t(55452),a=t(2784);function u(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,r.mV)();return(0,a.useMemo)(n,[t,n].concat((0,o.Z)(e)))}},96368:function(n,e,t){t.d(e,{EW:function(){return N},LW:function(){return L},TY:function(){return C},Yy:function(){return R},c2:function(){return D},eo:function(){return I},vi:function(){return j}});var o=t(95235),r=t(20406),a=t(81333),u=t(12741),c=t(28526),s=t.n(c),f=t(55452),i=t(87254),l=t(29705),d=t(55479),h=t(53738),m=t(84103),p=t(2784),E=t(23313),v=t(1368),w=t(46358),x=t(53865),T=t(41767),y=t(2875),g=t(62141),b=t(51823),S=t(6008),k=t(35634),O=t(52322);function _(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function P(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?_(Object(t),!0).forEach(function(e){(0,o.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var C=function(n){var e=(0,E.HW1)().data,t=(0,E.LkU)({variables:{workspaceId:n,sortBy:{field:E.eTF.Name,direction:E.SrV.Asc}},skip:!n}).data,o=(0,p.useMemo)(function(){var n=(null==e?void 0:e.fonts)||[],o=(null==t?void 0:t.fonts)||[],r=[].concat((0,u.Z)(n),(0,u.Z)(o));return[n,o,r.reduce(function(n,e){return n[e.id]=e,n},{}),r.map(function(n){return{id:n.id,name:n.name,url:n.cssUrl}})]},[null==e?void 0:e.fonts,null==t?void 0:t.fonts]);return{globalFonts:o[0],workspaceFonts:o[1],fontsMap:o[2],allThemeFonts:o[3]}},j=function(n){var e,t=n.docId,o=n.editor,u=(0,E.UoQ)(),c=(0,a.Z)(u,1)[0];return{updateDocThemeWithAccentImages:(0,p.useCallback)((e=(0,r.Z)(s().mark(function n(e){return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",c({variables:{id:t,themeId:e}}).then(function(n){var e,t,r=n.data;o&&o.commands.updateThemeAccentImages(null==r?void 0:null===(e=r.updateDoc)||void 0===e?void 0:null===(t=e.theme)||void 0===t?void 0:t.config.accentBackgrounds)}));case 3:case"end":return n.stop()}},n)})),function(n){return e.apply(this,arguments)}),[t,o,c])}},R=function(){var n=(0,w.CG)(g.Pu);return(0,x.wj)(n)},L=function(n,e,t){var o=(0,w.CG)(g.Pu),r=(0,T.a)().globalThemes,a=(0,p.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?o?t({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:n}}):t({type:"SET_THEME_EDITING",data:{theme:n}}):t({type:"NEW_BLANK_THEME"}),e()},[t,e]),u=(0,p.useCallback)(function(){a((0,k.QB)(r),!0)},[r,a]);return(0,p.useEffect)(function(){var n=y.pw.on(y.TI.OPEN_THEME_EDITOR,function(){null===o.workspaceId?a((0,k.mg)(o,!0)):a(o)});return function(){n()}},[o,a]),(0,p.useEffect)(function(){var e=(0,b.SJ)();n&&"true"===e.openThemeEditor&&(a(),(0,v.lO)({query:P(P({},(0,b.SJ)()),{},{openThemeEditor:void 0}),emitChange:!1}))},[n,a]),{openThemeEditor:a,openThemeEditorWithDefaultTheme:u}},D=function(n){var e=(0,E.rxn)({variables:{id:n},fetchPolicy:"cache-first"}).data;return(null==e?void 0:e.theme)||S.mU},I=function(n){var e=n.theme,t=(0,d.p)(),o=(0,E.UuR)(),r=(0,a.Z)(o,1)[0],u=e.name.replace(S.Qk,"");return(0,p.useCallback)(function(){e&&e.id&&(t.close("archive-theme-toast"),r({variables:{id:e.id},update:function(n,t){var o=t.data;null!=o&&o.unarchiveTheme&&n.writeQuery({query:E.$LR,variables:{workspaceId:e.workspaceId,archived:!1},data:{themes:[o.unarchiveTheme]}})},optimisticResponse:{unarchiveTheme:P(P({__typename:"Theme"},e),{},{archived:!1,updatedTime:new Date().toISOString()})},refetchQueries:["GetThemes"]}).then(function(){t({id:"unarchive-theme-toast",title:i.ag._({id:"QFw1At",values:{displayName:u}}),status:"success",duration:3e3,position:"top",isClosable:!0})}).catch(function(n){console.error("Couldn't restore theme ".concat(u," error: ").concat(n))}))},[r,e,t,u])},M=function(n){var e=n.showLinkToDashboard,t=n.unarchiveTheme;return e?(0,O.jsx)(h.xu,{children:(0,O.jsx)(f.cC,{id:"1jSYVL",components:{0:(0,O.jsx)(m.r,{textDecoration:"underline",isExternal:!0,href:x.oH}),1:(0,O.jsx)(l.h,{mx:"2px"}),2:(0,O.jsx)(m.r,{textDecoration:"underline",as:m.r,variant:"link",onClick:t})}})}):(0,O.jsx)(h.xu,{children:(0,O.jsx)(f.cC,{id:"HFliJ0",components:{0:(0,O.jsx)(m.r,{textDecoration:"underline",as:m.r,variant:"link",onClick:t})}})})},N=function(n){var e=n.theme,t=n.showLinkToDashboard,o=void 0!==t&&t,r=(0,d.p)(),u=(0,E.I3Y)(),c=(0,a.Z)(u,1)[0],s=I({theme:e}),f=e.name.replace(S.Qk,"");return(0,p.useCallback)(function(){e&&e.id&&c({variables:{id:e.id},update:function(n,t){var o=t.data;null!=o&&o.archiveTheme&&n.writeQuery({query:E.$LR,variables:{workspaceId:e.workspaceId,archived:!1},data:{themes:[o.archiveTheme]}})},optimisticResponse:{archiveTheme:P(P({__typename:"Theme"},e),{},{archived:!0,updatedTime:new Date().toISOString()})},refetchQueries:["GetThemes"]}).then(function(){r({id:"archive-theme-toast",title:i.ag._({id:"hY8SRr",values:{0:e.name}}),description:(0,O.jsx)(M,{showLinkToDashboard:o,unarchiveTheme:s}),status:"success",duration:3e3,position:"top",isClosable:!0})}).catch(function(n){console.error("Couldn't archive theme ".concat(f," error: ").concat(n))})},[e,c,r,o,s,f])}},41767:function(n,e,t){t.d(e,{a:function(){return s}});var o=t(2784),r=t(23313),a=t(46358),u=t(79204),c=t(10710),s=function(){var n=(0,c.n_)(),e=(0,a.TL)(),t=(0,r.BCl)({variables:{workspaceId:n,archived:!1},skip:!n,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),s=t.data,f=t.loading,i=(0,r.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),l=i.data,d=i.loading,h=(0,o.useMemo)(function(){return(null==l?void 0:l.themes)||[]},[null==l?void 0:l.themes]),m=(0,o.useMemo)(function(){return(null==s?void 0:s.themes)||[]},[null==s?void 0:s.themes]);return(0,o.useEffect)(function(){h.length>0&&e((0,u.cn)({globalThemes:h}))},[e,h]),(0,o.useEffect)(function(){m.length>0&&e((0,u.PA)({workspaceThemes:m}))},[e,m]),{isLoadingThemes:f||d,globalThemes:h}}},2875:function(n,e,t){t.d(e,{TI:function(){return r},pw:function(){return l}});var o,r,a=t(13089),u=t(96412),c=t(90129),s=t(29017),f=t(48200),i=t(98555);(o=r||(r={})).CREATE_COMMENT_FROM_SELECTION="createCommentFromSelection",o.OPEN_POPUP_COMMENT="openPopupComment",o.POPUP_COMMENT_TOGGLED="popupCommentToggled",o.OPEN_THEME_DRAWER="openThemeDrawer",o.OPEN_THEME_EDITOR="openThemeEditor",o.OPEN_PAGE_SETUP="openPageSetup";var l=new(function(n){(0,c.Z)(o,n);var e,t=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,t=(0,f.Z)(o);if(e){var r=(0,f.Z)(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return(0,s.Z)(this,n)});function o(){return(0,u.Z)(this,o),t.apply(this,arguments)}return(0,a.Z)(o)}(i.v))},55372:function(n,e,t){t.d(e,{ZP:function(){return i}});var o=t(28165),r=t(37914),a=t(52322),u=function(n){var e=n.files;return(0,a.jsx)(a.Fragment,{children:e.map(function(n){return(0,a.jsx)("link",{rel:"preload",href:n,as:"font",crossOrigin:""},n)})})},c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('".concat(n,"/fonts/EudoxusSans-Bold.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-Bold.woff') format('woff');\n  font-weight: bold;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('").concat(n,"/fonts/EudoxusSans-Regular.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-Regular.woff') format('woff');\n  font-weight: normal;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('").concat(n,"/fonts/EudoxusSans-Light.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-Light.woff') format('woff');\n  font-weight: 300;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('").concat(n,"/fonts/EudoxusSans-ExtraBold.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-ExtraBold.woff') format('woff');\n  font-weight: 800;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('").concat(n,"/fonts/EudoxusSans-ExtraLight.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-ExtraLight.woff') format('woff');\n  font-weight: 200;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('").concat(n,"/fonts/EudoxusSans-Medium.woff2') format('woff2'),\n    url('").concat(n,"/fonts/EudoxusSans-Medium.woff') format('woff');\n  font-weight: 500;\n  font-style: normal;\n  font-display: block;\n}\n")},s=["/fonts/EudoxusSans-Bold.woff","/fonts/EudoxusSans-Bold.woff2","/fonts/EudoxusSans-Regular.woff","/fonts/EudoxusSans-Regular.woff2","/fonts/EudoxusSans-Light.woff","/fonts/EudoxusSans-Light.woff2","/fonts/EudoxusSans-ExtraBold.woff","/fonts/EudoxusSans-ExtraBold.woff2","/fonts/EudoxusSans-ExtraLight.woff","/fonts/EudoxusSans-ExtraLight.woff2","/fonts/EudoxusSans-Medium.woff","/fonts/EudoxusSans-Medium.woff2"],f=s.map(function(n){return"".concat(r.v.FRONTEND_URL).concat(n)}),i=function(n){var e=n.shouldUsePublishedVersion,t=c(e?r.v.FRONTEND_URL:"");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Global,{styles:t}),(0,a.jsx)(u,{files:e?f:s})]})}}}]);
//# sourceMappingURL=7612-217dffced6ed30a1.js.map