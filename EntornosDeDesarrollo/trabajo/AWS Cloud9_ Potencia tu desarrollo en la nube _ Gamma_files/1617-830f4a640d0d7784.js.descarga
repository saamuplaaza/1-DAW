"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1617],{89962:function(e,n,t){t.d(n,{oO:function(){return i.o},wI:function(){return u},GE:function(){return P}});var i=t(62286),r=t(95235),o=t(11919),a=t(28165),s=t(14403),c=t(52322);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var d=function(e){var n=e.children;return(0,c.jsxs)(o.k,{width:"100%",height:"100%",direction:"column",minHeight:"var(--100vh)",bgColor:"gray.100",color:"gray.800",p:0,children:[(0,c.jsx)(a.Global,{styles:{body:{overflowY:"scroll"}}}),(0,c.jsx)(s.r,{}),n]})};function u(e){var n=function(n){return(0,c.jsx)(d,{children:(0,c.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},n))})};return"getInitialProps"in e&&(n.getInitialProps=e.getInitialProps),n}var p=t(95668),f=t(5632),h=t(45847),m=t.n(h),x=t(2784),g=t(37914),v=t(96735),b=t(63601),j=t(22527),y=t(2980),C=t(55372),O=t(9734);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var w=g.v.IS_CLIENT_SIDE&&document.cookie.includes("gammaGADebug=true"),I=function(){return"production"===g.v.APPLICATION_ENVIRONMENT&&!(0,O.l6)()||w},A=function(e){var n=e.children,t=e.headerMode,i=(0,f.useRouter)();return(0,x.useEffect)(function(){if(I()){var e=function(e){(0,y.o8)(e)};return i.events.on("routeChangeComplete",e),i.events.on("hashChangeComplete",e),function(){i.events.off("routeChangeComplete",e),i.events.off("hashChangeComplete",e)}}},[i.events]),(0,c.jsxs)(o.k,{direction:"column",width:"100%",height:"100%",minHeight:"var(--100vh)",bg:"#EDE9E8",color:"gray.800",overflowX:"hidden",children:[I()&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m(),{strategy:"afterInteractive",src:"https://www.googletagmanager.com/gtag/js?id=".concat(y.vt)}),(0,c.jsx)(m(),{id:"gtag-init",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('js', new Date());\n              gtag('config', '".concat(y.vt,"', {\n                page_path: window.location.pathname,\n              });\n            ")}})]}),(0,c.jsx)(b.P,{headerMode:t}),(0,c.jsx)(o.k,{zIndex:"1",id:"main",flex:"1",justifyContent:"flex-start",alignItems:"center",direction:"column",position:"relative",children:n}),(0,c.jsx)(v.Y,{})]})};function P(e,n){var t=function(t){var i=(n||{}).headerMode;return(0,c.jsxs)(p.f6,{theme:j.i,children:[(0,c.jsx)(C.ZP,{}),(0,c.jsx)(A,{headerMode:i,children:(0,c.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},t))})]})};return"getInitialProps"in e&&(t.getInitialProps=e.getInitialProps),t}},55562:function(e,n,t){t.d(n,{R:function(){return y},c:function(){return C}});var i=t(20406),r=t(95235),o=t(81333),a=t(28526),s=t.n(a),c=t(55452),l=t(55479),d=t(5632),u=t(2784),p=t(23313),f=t(98875),h=t(20252),m=t(36738),x=t(95173),g=t(33295),v=t(10710),b=t(52322);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var y={example_deck_clone_toast:p.L17.DuplicateInspiration,import:p.L17.ImportGoogleDoc,blank:p.L17.Blank,template_browser:p.L17.DuplicateTemplate,get_started_modal:p.L17.Blank,template_modal_griditem:p.L17.DuplicateTemplate,template_dashboard_griditem:p.L17.DuplicateTemplate,template_modal_preview:p.L17.DuplicateTemplate,template_modal_preview_create_theme:p.L17.DuplicateTemplate,"slash-new":p.L17.SlashNew,editor_toolbar_doc_menu_duplicate:p.L17.DuplicateDoc,dashboard_docs_view_duplicate:p.L17.DuplicateDoc,ai_generated:p.L17.AiGenerated,ai_generated_advanced:p.L17.AiGenerated,sites_add_page:p.L17.SitesAddPage,sites_copy_to_site:p.L17.SitesCopyToSite},C=function(){var e=(0,v.SE)(),n=e.user,t=e.currentWorkspace,a=(0,f.ye)("cardLayoutsEnabled"),C=(0,p.CsQ)(),O=(0,o.Z)(C,2),_=O[0],w=O[1],I=w.data,A=w.loading,P=(0,d.useRouter)(),k=P.push,D=P.replace,E=(0,l.p)();return[(0,u.useCallback)(function(e){var o,l,d=null==n?void 0:null===(l=n.settings)||void 0===l?void 0:l.needsEditorOnboarding,u=e.source,p=null==e?void 0:e.channelId,f=(null==e?void 0:e.historyFn)==="replace"?D:k,v=d?"quickstart":"empty";if(!(null!=t&&t.id)){console.error("[createDocAndNavigate] No currentWorkspace found");return}var C={cardLayoutsEnabled:a},O=null!=e&&e.document?e.document:"empty"===v?(0,m.R$)(n,{docFlags:C}):(0,m.VK)(n,{docFlags:C}),w=(0,g.q)(O);return console.debug("[createDocAndNavigate] Creating doc",{document:O,encodedDocument:w}),_({variables:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({workspaceId:null==t?void 0:t.id,title:(null==e?void 0:e.title)||"",source:y[e.source],initialContent:{ydoc:w,schemaVersion:x.bI,editors:[null==n?void 0:n.id]}},p?{channels:[{channelId:p}]}:{})}).then((o=(0,i.Z)(s().mark(function e(n){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.data,(0,h.Q)({doc_id:null==t?void 0:t.createDoc.id,source:u,channel:p||null}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==t?void 0:t.createDoc.id),f("/docs/".concat(null==t?void 0:t.createDoc.id).concat(d?"?tour=true":""));case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})).catch(function(e){console.error("[createDocAndNavigate]",e),E({title:(0,b.jsx)(c.cC,{id:"0jT1fA"}),description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[a,_,null==t?void 0:t.id,k,D,E,n]),{data:I,loading:A}]}},86379:function(e,n,t){t.d(n,{C:function(){return m}});var i=t(55452),r=t(20010),o=t(56915),a=t(48273),s=t(92619),c=t(64827),l=t(2167),d=t(91012),u=t(80353),p=t(71354),f=t(45650),h=t(52322),m=function(e){var n=e.invitationCount,t=e.isOpen,m=e.onClose,x=e.onSendInvitationsClick,g=e.onDiscardClick;return t?(0,h.jsxs)(r.u_,{returnFocusOnClose:!1,onClose:m,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,h.jsx)(o.Z,{}),(0,h.jsxs)(a.h,{children:[(0,h.jsx)(s.x,{children:(0,h.jsx)(i.cC,{id:"tW/kB6",values:{invitationCount:n}})}),(0,h.jsx)(c.o,{}),(0,h.jsx)(l.f,{children:(0,h.jsx)(d.x,{children:(0,h.jsx)(i.cC,{id:"qxNK2k",values:{invitationCount:n}})})}),(0,h.jsx)(u.m,{children:(0,h.jsxs)(p.K,{spacing:2,direction:"row",align:"center",children:[(0,h.jsx)(f.z,{onClick:g,children:(0,h.jsx)(i.cC,{id:"bzSI52"})}),(0,h.jsx)(f.z,{variant:"solid",onClick:x,children:(0,h.jsx)(i.cC,{id:"6dWGPZ",values:{invitationCount:n}})})]})})]})]}):null}},96735:function(e,n,t){t.d(n,{Y:function(){return x}});var i=t(11919),r=t(56133),o=t(71354),a=t(5766),s=t(53738),c=t(84103),l=t(36895),d=t(50390),u=t(35837),p=t(27302),f=t(51746),h=t(51810),m=t(52322),x=function(){var e,n=(e=(0,f.G)(),[{category:"Product",items:[{text:"Help",url:h.mc.help},{text:"Change log",url:h.mc.changeLog},{text:"Pricing",url:h.mc.pricing},{text:"Templates",url:h.mc.templates},{text:"Inspiration",url:h.mc.inspiration},{text:"Contact us",onClick:e}]},{category:"Company",items:[{text:"Team",url:h.mc.team},{text:"Terms of Service",url:h.mc.terms},{text:"Privacy Policy",url:h.mc.privacy}]},{category:"Follow us",items:[{text:"Twitter",url:"https://twitter.com/meetgamma"},{text:"Instagram",url:"https://www.instagram.com/meetgamma/"},{text:"LinkedIn",url:"https://www.linkedin.com/company/gamma-app/"},{text:"TikTok",url:"https://www.tiktok.com/@meetgamma"}]}]);return(0,m.jsx)(i.k,{fontSize:"12px",bgColor:"#1d0042",color:"gray.400",py:20,id:"footer",justifyContent:"center",children:(0,m.jsx)(r.W,{maxW:"940px",children:(0,m.jsxs)(o.K,{children:[(0,m.jsxs)(a.M,{columns:4,spacing:6,mb:10,minChildWidth:"200px",children:[(0,m.jsx)(s.xu,{w:"100%",children:(0,m.jsx)(c.r,{href:"/",children:(0,m.jsx)(l.E,{src:"https://assets.website-files.com/60de2701a7b28f308f619d3d/60de2701a7b28ff7e9619d49_White%20Logo%20g%20spot.svg",loading:"lazy",width:"120px",alt:"Gamma logo"})})}),n.map(function(e,n){var t=e.category,i=e.items;return(0,m.jsxs)(s.xu,{w:"100%",children:[(0,m.jsx)(d.X,{marginBottom:"25px",color:"rgba(239, 208, 255, 0.7)",fontWeight:"bold",fontSize:"14px",fontFamily:"var(--body-font)",letterSpacing:"normal",children:t}),(0,m.jsx)(u.QI,{listStyleType:"none",margin:0,children:i.map(function(e,n){var t=e.text,i=e.url,r=e.onClick;return(0,m.jsx)(u.HC,{fontSize:"14px",pb:4,children:(0,m.jsx)(c.r,{color:"hsla(0, 0%, 100%, 0.86)",href:i||void 0,onClick:r||void 0,children:t})},n)})})]},n)})]}),(0,m.jsxs)(p.M,{color:"rgba(239, 208, 255, 0.7)",fontSize:"13px",children:["\xa9 ",new Date().getFullYear()," Gamma Tech, Inc."]})]})})})}},63601:function(e,n,t){t.d(n,{P:function(){return h}});var i=t(53738),r=t(71354),o=t(84103),a=t(36895),s=t(93319),c=t(45650),l=t(10710),d={src:"/_next/static/media/gamma-logo-white.9613e68b.svg"},u=t(51810),p=t(52322),f=[{text:"Pricing",url:u.mc.pricing,hideWhenSmall:!0},{text:"Templates",url:u.mc.templates,hideWhenSmall:!0},{text:"Login",url:u.mc.login}],h=function(e){var n=e.headerMode,t=(0,l.SE)(),h=t.user,m=t.isUserLoading,x="light"===(void 0===n?"light":n);return(0,p.jsx)(i.xu,{py:4,px:[6,6,12],h:u.AP,pr:[4,6,12],zIndex:"999",top:["auto","auto","0"],children:(0,p.jsxs)(r.K,{direction:"row",children:[(0,p.jsx)(o.r,{href:"/","aria-current":"page",children:(0,p.jsx)(a.E,{w:"100px",src:x?"https://assets.website-files.com/62e823626cd4fdd0e5dc1527/62e823626cd4fdc26bdc1576_Gamma.svg":d.src,loading:"lazy",alt:"Gamma logo"})}),(0,p.jsx)(s.L,{}),!m&&!h&&(0,p.jsxs)(r.K,{direction:"row",spacing:[4,4,8],fontWeight:"500",fontSize:"14px",color:x?"#3b3a40":"#fff",alignItems:"center",transition:"color 300ms ease",children:[f.map(function(e){var n=e.text,t=e.url,i=e.hideWhenSmall;return(0,p.jsx)(o.r,{display:i?["none","none","block"]:"block",href:t,color:x?void 0:"whiteAlpha.800",_hover:{color:x?"#000":"whiteAlpha.900",textDecoration:"none"},children:n},n)}),(0,p.jsx)(c.z,{as:o.r,href:u.mc.signup,maxHeight:"32px",borderStyle:"solid",borderWidth:"0.5px",fontSize:"14px",borderColor:"rgba(0, 0, 0, 0.24)",backgroundColor:"#fff",boxShadow:"0 4px 4px 0 rgb(0 0 0 / 5%)",fontWeight:"700",borderRadius:"100px",color:"#3b3a40",_hover:{color:"black",textDecoration:"none"},children:"Try for free"})]})]})})}},51810:function(e,n,t){t.d(n,{AP:function(){return r},mc:function(){return i}});var i={pricing:"/pricing",help:"https://help.gamma.app",changeLog:"https://gamma.app/public/Change-Log-awopg3inl2eo3b3",team:"https://gamma.app/public/Meet-the-Team-at-Gamma-nbqgqy05eyfcsbi",terms:"https://gamma.app/terms",privacy:"https://gamma.app/privacy",login:"/signin",signup:"/signup",templates:"/templates",inspiration:"/inspiration"},r=16},22527:function(e,n,t){t.d(n,{i:function(){return s}});var i=t(14446),r=t(45989),o=t(55966),a={colors:o.qZ.colors,zIndices:{tooltip:5600,modal:1800,dropdown:1600},fonts:{body:"'Eudoxus Sans', sans-serif",heading:"'p22-mackinac-pro', sans-serif"},fontSizes:{xxs:"11px"},components:{Link:{baseStyle:{textDecoration:"none"}},Button:{variants:{fancy:{color:"white",borderRadius:"full",background:"linear-gradient(180deg, #6850FF 0%, rgba(38, 59, 227, 0) 100%), linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(272.9deg, #003DD9 0.18%, #6850FF 109.19%, #DF7A6C 188.8%)",border:"1px solid rgba(255, 255, 255, 0.12)",_hover:{background:"linear-gradient(180deg, #3A24C2 0%, rgba(38, 59, 227, 0) 100%), linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(272.9deg, #002C9D 0.18%, #6850FF 109.19%, #DF7A6C 188.8%, #A56057 224.56%)"},_active:{boxShadow:"inset 1px 1px 5px rgb(0 0 0 / 50%)",background:"linear-gradient(180deg, #3A24C2 0%, rgba(38, 59, 227, 0) 100%), linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%), linear-gradient(272.9deg, #002C9D 0.18%, #6850FF 109.19%, #DF7A6C 188.8%, #A56057 224.56%)"},textDecoration:"none !important"}}},Heading:{baseStyle:{letterSpacing:"-0.04em"},variants:{fancy:{backgroundImage:o.qZ.colors.gradient["blue-to-purple"],backgroundClip:"text",color:"transparent"}}}}},s=(0,i.B1)(a,(0,r.A)({colorScheme:"trueblue"}))},2980:function(e,n,t){t.d(n,{o8:function(){return r},vt:function(){return i}});var i=t(37914).v.NEXT_PUBLIC_GA_ID,r=function(e){var n,t;null===(n=(t=window).gtag)||void 0===n||n.call(t,"config",i,{page_path:e})}},52596:function(e,n,t){t.d(n,{V:function(){return m}});var i=t(55452),r=t(71354),o=t(8283),a=t(91012),s=t(4036),c=t(93319),l=t(71193),d=t(91354),u=t(75085),p=t(51331),f=t(82483),h=t(52322),m=function(e){var n=e.onClose,t=e.onOpen,m=e.segmentEvent,x=e.doc,g=e.label,v=(0,d.y)("upsellUXEnabled_Pro"),b=(0,p.dU)(null==x?void 0:x.organization),j=(0,f.zc)().openUpsellModal;return!1===b&&v?(0,h.jsxs)(r.K,{my:4,borderTop:"1px solid var(--chakra-colors-gray-100)",w:"100%",children:[(0,h.jsxs)(o.U,{mt:4,children:[(0,h.jsxs)(o.U,{children:[(0,h.jsx)(a.x,{children:g||(0,h.jsx)(i.cC,{id:"alnKae",values:{GAMMA_PROPER_NOUN:u.N6}})}),(0,h.jsx)(s.C,{colorScheme:"trueblue",variant:"solid",children:u.k3})]}),(0,h.jsx)(c.L,{}),(0,h.jsx)(l.r,{onClickCapture:function(e){e.preventDefault(),j({onOpenCallback:n,onCloseCallback:t,segmentEvent:m})},checked:!1})]}),(0,h.jsx)(a.x,{fontSize:"xs",color:"gray.600",children:(0,h.jsx)(i.cC,{id:"/BIHRF",values:{GAMMA_PROPER_NOUN:u.N6}})})]}):null}},15241:function(e,n,t){t.d(n,{L:function(){return b}});var i=t(95235),r=t(89177),o=t(27037),a=t(55452),s=t(11919),c=t(13061),l=t(8283),d=t(12221),u=t(91012),p=t(53738),f=t(49929),h=t(55966),m=t(7985);t(16092);var x=t(52322);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var b=function(e){var n=e.selectedCollaborator,t=e.idx,i=e.handleRemoveClick,g=n&&(0,m.G)((null==n?void 0:n.email)||""),b=0===t?170:300;return(0,x.jsx)(s.k,{width:0===t?"calc(100% - 100px)":"",className:"searchbartag","data-testid":"searchbartag-collaborator-".concat(n.email),children:(0,x.jsxs)(c.Vp,v(v({size:"md",minW:110},g?{}:{colorScheme:"red",bg:"red",color:"white"}),{},{children:["id"in n?(0,x.jsx)(h.kH,{label:n.email,"aria-label":n.email,children:(0,x.jsxs)(l.U,{children:[(0,x.jsx)(d.q,{size:"2xs",m:0,name:n.displayName,src:n.profileImageUrl}),(0,x.jsx)(u.x,{textTransform:"capitalize",wordBreak:"break-word",noOfLines:1,maxW:b,lineHeight:"1.5",children:n.displayName})]})}):(0,x.jsx)(h.kH,{label:g?n.email:(0,x.jsx)(a.cC,{id:"XILg0L"}),"aria-label":n.email,children:(0,x.jsxs)(l.U,{flex:1,children:[(0,x.jsx)(p.Cd,{bg:g?"trueblue.100":"none",size:6,children:(0,x.jsx)(f.G,{icon:g?o.FU:r.WV})}),(0,x.jsx)(u.x,{wordBreak:"break-all",display:"block",height:"100%",width:"100%",noOfLines:1,maxW:b,lineHeight:"1.5",children:n.email})]})}),(0,x.jsx)(c.SD,{onClick:i})]}))},"id"in n?n.id:n.email)}},35330:function(e,n,t){t.d(n,{y:function(){return o}});var i=t(75944),r=t(2784),o=function(){var e=(0,i.q)({id:"sharePanelDisclosure"}),n=e.isOpen,t=e.onOpen,o=e.onClose,a=(0,r.useState)("invite");return{isSharePanelOpen:n,onSharePanelOpen:t,onSharePanelClose:o,view:a[0],setView:a[1]}}},41864:function(e,n,t){t.d(n,{Nj:function(){return nj},t9:function(){return ny},o$:function(){return nk},aA:function(){return nJ},WQ:function(){return tn}});var i,r,o,a=t(92743),s=t(55452),c=t(20010),l=t(56915),d=t(48273),u=t(92619),p=t(53738),f=t(64827),h=t(40110),m=t(2167),x=t(71354),g=t(81927),v=t(85982),b=t(45650),j=t(4036),y=t(80353),C=t(11919),O=t(93319),_=t(49929),w=t(55966),I=t(2784),A=t(23313),P=t(30118),k=t(51331),D=t(16092),E=t(92779),R=t(95235),S=t(20406),N=t(81333),T=t(49626),M=t(46973),G=t(28526),L=t.n(G),z=t(29705),U=t(55479),F=t(91012),Z=t(84103),V=t(76360),W=t(75342),Y=t(8283),$=t(36895),K=t(67904),q=t(37164),B=t(5632),H=t(24021),X=t(75085),J=t(32333),Q=t(42879),ee=t(10710),en=t(52322);function et(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function ei(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?et(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):et(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var er=function(e){var n,t=e.title,i=e.site,r="/".concat((0,K.IR)(t||"untitled"));return null!=i&&null!==(n=i.routes)&&void 0!==n&&n.find(function(e){return e.path===r})&&(r="".concat(r,"-").concat((0,q.x0)(6))),r},eo={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},ea=function(e){var n,t=e.doc,i=e.onCreateSiteClick,r=(0,J.z$)(),o=(0,A.So6)(),a=(0,N.Z)(o,1)[0],c=(0,ee.SE)().currentWorkspace,l=(0,A.qbt)(),d=(0,N.Z)(l,1)[0],u=(0,I.useState)(!1),p=u[0],f=u[1],m=(0,A.bBo)({variables:{workspaceId:null==c?void 0:c.id},skip:!(null!=c&&c.id)}),g=m.data,v=m.loading,b=(0,U.p)(),j=(0,B.useRouter)().push,y=null==g?void 0:g.sites,w=(0,I.useCallback)((n=(0,S.Z)(L().mark(function e(n){var i,o,l;return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),i=null==y?void 0:y.find(function(e){return e.id===n}),o=t.id,null!=c&&c.id){e.next=6;break}return console.error("[CopyToSiteModal] No currentWorkspace found"),e.abrupt("return");case 6:return l=er({title:t.title,site:i}),e.next=9,(0,Q.iL)(o);case 9:a({variables:{duplicateDocInput:{sourceDocId:o,source:A.L17.SitesCopyToSite,title:t.title,orgId:null==c?void 0:c.id,orgAccess:A.y3$.Manage,themeId:null}}}).then(function(e){var t,i=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.duplicateDoc.id;if(!i){console.error("[CopyToSiteModal] No docId found");return}null==r||r.track(J.AA.DOC_COPIED_TO_SITE,{doc_id:o,site_id:n,source:A.L17.SitesCopyToSite}),d({variables:{input:{siteId:n,docId:i,path:l}},refetchQueries:["GetSite"]}).then(function(){var e=(0,Q.as)(n,i);console.debug("[CopyToSiteModal] Doc added to site. Adding route then navigating to editor",o),b({position:"top",title:(0,en.jsx)(s.cC,{id:"oMgC5V"}),description:(0,en.jsx)(s.cC,{id:"/qBkEJ"}),status:"success",duration:5e3}),j(e)}).catch(function(e){b({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),f(!1)}).finally(function(){f(!1)})}).catch(function(e){b({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),f(!1)});case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[r,null==c?void 0:c.id,t.id,t.title,a,j,d,y,b]),P=v||p;return(0,en.jsxs)(en.Fragment,{children:[P&&(0,en.jsx)(C.k,{w:"100",h:"400px",maxH:"30vh",children:(0,en.jsx)(H.AA,{})}),!P&&(0,en.jsxs)(x.K,{spacing:4,children:[(0,en.jsxs)(x.K,{pt:2,pb:2,children:[(0,en.jsx)(F.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,en.jsx)(s.cC,{id:"g3e5hy",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})})," ",(0,en.jsxs)(F.x,{fontSize:"xs",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,en.jsx)(s.cC,{id:"Fdj1VM",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc},components:{0:(0,en.jsx)("strong",{})}}),(0,en.jsxs)(Z.r,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,en.jsx)(s.cC,{id:"Px95UX"}),(0,en.jsx)(z.h,{mx:"2px"})]})," "]})]}),y&&y.length>0&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(F.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,en.jsx)(s.cC,{id:"KTpbiY",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})}),null==y?void 0:y.map(function(e){return(0,en.jsx)(V.Z,ei(ei({onClick:function(){return w(e.id)},onKeyPress:function(n){"Enter"===n.key&&w(e.id)}},eo),{},{children:(0,en.jsx)(W.e,{children:(0,en.jsxs)(Y.U,{children:[(0,en.jsx)(x.K,{spacing:0,children:(0,en.jsxs)(Y.U,{children:[e.faviconUrl&&(0,en.jsx)($.E,{w:"4",src:e.faviconUrl}),(0,en.jsx)(F.x,{fontWeight:"600",children:e.name})]})}),(0,en.jsx)(O.L,{}),(0,en.jsx)(_.G,{icon:M.eF})]})})}),e.id)}),(0,en.jsxs)(Y.U,{children:[(0,en.jsx)(h.i,{}),(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.500",children:(0,en.jsx)(s.cC,{id:"ZAVklK"})}),(0,en.jsx)(h.i,{})]})]}),(0,en.jsx)(V.Z,ei(ei({onClick:function(){i()},onKeyPress:function(e){"Enter"===e.key&&i()}},eo),{},{children:(0,en.jsx)(W.e,{children:(0,en.jsxs)(Y.U,{children:[(0,en.jsxs)(x.K,{spacing:0,children:[(0,en.jsx)(F.x,{fontWeight:"600",children:(0,en.jsx)(s.cC,{id:"31WSA3"})}),(0,en.jsx)(Y.U,{children:(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.500",children:(0,en.jsx)(s.cC,{id:"zz0nEd",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})})})]}),(0,en.jsx)(O.L,{}),(0,en.jsx)(_.G,{icon:T.r8})]})})}))]})]})},es=t(27901),ec=t(9734),el=t(31145),ed=t(18992),eu=t(59637),ep=t(94659),ef=t(98875),eh=t(78308),em=t(12741),ex=t(75652),eg=t.n(ex),ev=t(37914),eb=t(46358),ej=t(62141),ey=(i=(0,S.Z)(L().mark(function e(n,t,i){var r;return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(ev.v.API_HOST||"","/export/docs/").concat(n,"/").concat(i),e.abrupt("return",fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":ev.v.SHARE_TOKEN||""},body:JSON.stringify({docContent:t})}));case 2:case"end":return e.stop()}},e)})),function(e,n,t){return i.apply(this,arguments)}),eC=function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf",r=(0,U.p)(),o=(0,I.useRef)(null),a=(0,J.z$)(),c=(0,I.useState)(!1),l=c[0],d=c[1],u=(0,I.useCallback)(function(){o.current=r({id:"export-toast-".concat(e.id,"-").concat(i),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:(0,en.jsx)(s.cC,{id:"eJOEBy"})})},[null==e?void 0:e.id,r,i]),p=(0,I.useCallback)(function(){o.current&&r.update(o.current,{status:"loading",variant:"light",title:(0,en.jsx)(s.cC,{id:"eJOEBy"}),description:(0,en.jsx)(s.cC,{id:"vMANwD"}),isClosable:!0})},[r,i]),f=(0,I.useCallback)(function(){o.current&&r.update(o.current,{title:(0,en.jsx)(s.cC,{id:"walT1X"}),status:"error",duration:null,isClosable:!0})},[r]),h=(0,I.useCallback)(function(e){o.current&&r.update(o.current,{status:"success",title:(0,en.jsx)(s.cC,{id:"pK8dQg"}),description:(0,en.jsx)(F.x,{children:(0,en.jsx)(s.cC,{id:"MTtTC2",components:{0:(0,en.jsx)(Z.r,{textDecoration:"underline",target:"_blank",href:e||void 0,onClick:function(){return o.current&&r.close(o.current)}})}})}),isClosable:!0})},[r,i]);return{handleExport:(0,I.useCallback)(function(){var r,o=null==t?void 0:t.getJSON();d(!0),u();var s=setTimeout(p,3e4);ey(e.id,o,i).then((r=(0,S.Z)(L().mark(function t(r){var o,s,c,l,d,u;return L().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.blob();case 2:if(s=t.sent,r.ok){t.next=5;break}throw Error("Export failed.");case 5:c="pdf"===i?J.AA.PDF_EXPORTED:J.AA.PPTX_EXPORTED,null==a||a.track(c,{doc_id:e.id,source:n}),h(decodeURIComponent(r.headers.get("x-gamma-download-url")||"")||void 0),l=window.URL.createObjectURL(s),d=document.createElement("a"),u=decodeURIComponent((null===(o=(r.headers.get("Content-Disposition")||"").split(";").find(function(e){return e.includes("filename=")}))||void 0===o?void 0:o.replace("filename=","").trim())||"".concat(e.id,".").concat(i)),d.download=u,d.href=l,d.style.display="none",document.body.appendChild(d),d.click(),d.remove();case 17:case"end":return t.stop()}},t)})),function(e){return r.apply(this,arguments)})).catch(function(){f()}).finally(function(){d(!1),clearTimeout(s)})},[a,null==e?void 0:e.id,t,n,i,f,u,p,h]),exportInProgress:l}},eO=function(e){var n=(0,eb.CG)(ej.Pu),t=e.theme||n;return(0,I.useMemo)(function(){var e=t.fonts?(0,em.Z)(t.fonts):[];return e.length<2&&e.push({id:"Inter",name:"Inter",url:"https://fonts.googleapis.com/css2?family=Inter"}),eg()(e).map(function(e){var n;return null!==(n=e.url)&&void 0!==n&&n.includes("fonts.googleapis.com")?{name:e.name,url:"https://fonts.google.com/specimen/".concat(e.name)}:{name:e.name}}).filter(function(e){return!!e})},[t])},e_=t(2875),ew=t(64457),eI=t(52596),eA=function(e){var n=e.doc,t=e.editor,i=e.onSharePanelOpen,r=e.onSharePanelClose,o=(0,ef.ye)("pptExport");return(0,en.jsxs)(ep.g,{spacing:4,align:"start",pt:2,children:[(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.600",children:(0,en.jsx)(s.cC,{id:"qwhOQ/",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})}),(0,en.jsxs)(x.K,{spacing:2,width:"100%",children:[(0,en.jsx)(ek,{format:"pdf",label:"PDF",icon:eu.gS,accentColor:"red",doc:n,editor:t}),o&&(0,en.jsx)(ek,{format:"pptx",label:"PowerPoint",icon:ed.WO,accentColor:"orange",doc:n,editor:t})]}),o&&(0,en.jsx)(eP,{doc:n}),t&&(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.600",children:(0,en.jsx)(s.cC,{id:"8LhjM/",components:{0:(0,en.jsx)(b.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){r(),e_.pw.emit(e_.TI.OPEN_PAGE_SETUP,"cards")}})}})}),(0,en.jsx)(eI.V,{onClose:r,onOpen:i,segmentEvent:eh.AA.GAMMA_PRO_UPSELL_EXPORT_SETTINGS_REMOVE_WATERMARK,doc:n})]})},eP=function(e){var n=eO(e.doc);return n.length?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.600",children:(0,en.jsx)(s.cC,{id:"5qYpE7"})}),(0,en.jsx)(Y.U,{children:n.map(function(e){var n=e.name,t=e.url;return(0,en.jsx)(p.xu,{border:"1px",borderColor:"gray.200",borderRadius:"md",h:"auto",_hover:t?{boxShadow:"var(--chakra-shadows-md)",borderColor:"var(--chakra-colors-trueblue-300)",color:"var(--chakra-colors-trueblue-400)"}:{},onClick:t?function(){return window.open(t,"_blank")}:void 0,cursor:t?"pointer":void 0,children:(0,en.jsxs)(Y.U,{p:3,paddingRight:4,spacing:4,children:[(0,en.jsx)(F.x,{fontWeight:"medium",children:n}),t&&(0,en.jsx)(_.G,{icon:el.faArrowUpRightFromSquare,size:"1x"})]})},"name")})})]}):null},ek=function(e){var n=e.format,t=e.doc,i=e.editor,r=e.icon,o=e.accentColor,a=e.label,c=e.badge,l=eC(t,"share_panel",i,n),d=l.handleExport,u=l.exportInProgress;return(0,en.jsx)(ew.j,{onClick:d,icon:r,formatLabel:a,accentColor:o,exportInProgress:u,exportInProgressNote:(0,en.jsx)(s.cC,{id:"57bp6s"}),badge:c})},eD=t(11446),eE=t(47299),eR=t(3851),eS=t(59195),eN=t(61751),eT=t(40130),eM=t(27037),eG=t(52622),eL=(t(98683),t(87254)),ez=t(49747),eU=(t(97907),t(50390)),eF=t(72360),eZ=t(48322),eV=t(12221),eW=t(1842),eY=t.n(eW),e$=t(97442),eK=t(93148),eq=t(9846),eB=t(20252),eH=t(98666),eX=t(93858),eJ=t(51823),eQ=t(49392),e0=t(34396),e1=t(19911),e2=function(e){var n=e.icon,t=e.showDisabled,i=void 0!==t&&t;return(0,en.jsx)(p.Cd,{color:"gray.800",textAlign:"center",bg:"gray.200",size:8,opacity:i?.5:1,children:i?(0,en.jsxs)("span",{className:"fa-stack",children:[(0,en.jsx)(_.G,{icon:e1.u6,className:"fa-stack-1x"}),(0,en.jsx)(_.G,{icon:n,className:"fa-stack-1x"})]}):(0,en.jsx)(_.G,{size:"1x",icon:n})})},e5=function(e){var n=e.channel,t=e.doc,i=e.isDisabled,r=e.showDisabledIcon,o=void 0!==r&&r,a=(0,e0.Z)().removeDocChannel,c=(0,I.useCallback)(function(){t&&a(t,n.id)},[n.id,t,a]),l=(0,eJ.j)({slug:n.slug,id:n.id});return(0,en.jsxs)(Y.U,{py:2,w:"100%",justify:"space-between","data-testid":"workspace-row-".concat(n.id),children:[(0,en.jsx)(p.xu,{children:(0,en.jsxs)(C.k,{alignItems:"center",children:[(0,en.jsx)(e2,{icon:D.Ty,showDisabled:o}),(0,en.jsx)(p.xu,{ml:3,opacity:o?.5:1,children:(0,en.jsx)(Z.r,{href:l,target:"_blank",children:n.name})})]})}),(0,en.jsx)(b.z,{size:"sm",variant:"ghost",colorScheme:"red",onClick:c,isDisabled:i,children:(0,en.jsx)(s.cC,{id:"t/YqKh"})})]},n.id)},e3=t(46949),e4=t(76648),e6=t(21891),e7=t(420),e9=t(35316),e8=t(90113),ne=t(38421),nn=t.n(ne),nt=function(e){var n=e.workspaceId,t=e.docId,i=e.existingChannels,r=e.isDisabled,o=(0,I.useRef)(null),a=(0,I.useState)(""),c=a[0],l=a[1],d=(0,I.useState)([]),u=d[0],f=d[1],h=(0,I.useState)(!1),m=h[0],g=h[1],v=(0,e0.Z)().addDocChannel,b=(0,A.Kce)({variables:{query:c,workspaceId:n},skip:!c}),j=b.data,y=b.loading;(0,I.useEffect)(function(){if(!y&&j){var e=j.search.filter(Boolean);f(e),g(0===e.length)}},[j,y]);var O=(0,I.useMemo)(function(){return c?u.filter(function(e){return!i.find(function(n){return n.id===e.id})}):[]},[i,c,u]),P=(0,I.useCallback)(function(e){var n=O.find(function(n){return n.id===e});if(!n){console.error("[ChannelSearchBar.addSelectedChannel] No matching channel found");return}v({docId:t,channel:n,existingChannels:i})},[v,t,i,O]);return(0,en.jsx)(e4.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-channel-search-bar",children:(0,en.jsx)(p.xu,{flex:1,children:(0,en.jsxs)(e6.B,{w:"100%",justifyContent:"center",zIndex:1,children:[(0,en.jsx)(C.k,{display:"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:"gray.300",zIndex:"overlay",opacity:.4,children:(0,en.jsx)(e7.$,{})}),(0,en.jsxs)(e8.AutoComplete,{rollNavigation:!0,multiple:!0,emptyState:function(){return!!m&&(0,en.jsxs)(C.k,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:[(0,en.jsx)(p.xu,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,en.jsx)(nn(),{src:"/images/Sal-Fishing-2x.png",width:"640",height:"361",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,en.jsx)(eU.X,{size:"xs",mb:2,textAlign:"center",children:(0,en.jsx)(s.cC,{id:"NmfOr+"})}),(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.400",textAlign:"center",children:(0,en.jsx)(s.cC,{id:"kXnLEt"})})]})},suggestWhenEmpty:!1,openOnFocus:!0,filter:function(){return!0},onSelectOption:function(e){P(e.item.value),l("")},children:[(0,en.jsxs)(e9.Z,{pointerEvents:"none",color:"gray.300",h:"100%",flexDirection:"column",children:[(0,en.jsx)(C.k,{flex:1}),(0,en.jsx)(C.k,{h:10,py:4,alignItems:"center",children:(0,en.jsx)(e3.W,{w:10})})]}),(0,en.jsx)(e8.AutoCompleteInput,{ref:o,"data-testid":"autocomplete-channels-input",cursor:r?"not-allowed":void 0,disabled:r,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:eL.ag._({id:"KmCmUJ"}),transition:"width 1s ease-in-out",value:c,onChange:function(e){var n=e.target.value;l(n),n||f([])}}),(0,en.jsx)(e8.AutoCompleteList,{w:"100%",mt:0,display:c.length>0?"flex":"none",children:O.length>0&&O.map(function(e){var n=e.id,t=e.name,i=e.memberCount,r=e.isMember,o=e.members;return(0,en.jsx)(e8.AutoCompleteItem,{"data-testid":"autocomplete-item-channel-".concat(n),value:{id:e.id},getValue:function(e){return e.id},align:"center",_focus:{bg:"trueblue.50"},children:(0,en.jsxs)(Y.U,{spacing:4,p:0,flex:1,children:[(0,en.jsx)(p.xu,{color:"gray.700",children:(0,en.jsx)(_.G,{icon:D.Ty})}),(0,en.jsxs)(x.K,{spacing:0,flex:"1",children:[(0,en.jsx)(F.x,{children:t}),(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.400",children:r?(0,en.jsx)(s.cC,{id:"tWPlLK",values:{0:i||0}}):(0,en.jsx)(s.cC,{id:"pkIIls",values:{0:i||0}})})]}),(0,en.jsx)(w.NL,{size:"xs",overflowTooltipLabel:eL.ag._({id:"25VyZX"}),avatars:o||[],max:3,onClick:function(e){e.preventDefault(),e.stopPropagation()}})]})},n)})})]})]})})})},ni=t(75944),nr=t(4448),no=t(7985),na=t(41004),ns=t(60147),nc=t(86379),nl=t(29677),nd=t(31912),nu=t(36471),np=t(26673),nf=t(9088),nh=t(30893),nm=t(40771),nx=t(63849),ng=t(2575),nv=t(95258),nb=t(82904);(o||(o={})).NoAccess="no_access";var nj=(r={},(0,R.Z)(r,A.y3$.Manage,{title:function(){return eL.ag._({id:"DZfDCl"})},description:function(){return eL.ag._({id:"r59J7Q"})}}),(0,R.Z)(r,A.y3$.Edit,{title:function(){return eL.ag._({id:"ePK91l"})},description:function(){return eL.ag._({id:"kuZsYI"})}}),(0,R.Z)(r,A.y3$.Comment,{title:function(){return eL.ag._({id:"NBdIgR"})},description:function(){return eL.ag._({id:"IwFh5+"})}}),(0,R.Z)(r,A.y3$.View,{title:function(){return eL.ag._({id:"jpctdh"})},description:function(){return eL.ag._({id:"yzFEXd"})}}),(0,R.Z)(r,o.NoAccess,{title:function(){return eL.ag._({id:"oPoLg+"})},description:function(){return eL.ag._({id:"Vcif8/"})}}),r),ny=function(e){var n=e.isDisabled,t=e.options,i=e.disabledOptions,r=void 0===i?[]:i,a=e.selected,c=e.variant,l=e.onClick,d=void 0===l?function(){}:l,u=e.onRemove;return(0,en.jsxs)(nf.v,{closeOnSelect:!0,children:[(0,en.jsx)(nh.j,{"data-testid":"permission-menu-value-".concat(a),as:b.z,display:"flex",size:"sm",isDisabled:n,variant:void 0===c?"ghost":c,rightIcon:(0,en.jsx)(_.G,{icon:np.pt}),children:nj[a||o.NoAccess].title()}),(0,en.jsx)(nm.q,{textAlign:"left",zIndex:"overlay",children:(0,en.jsxs)(nx._,{defaultValue:a,value:a,title:eL.ag._({id:"9cDpsw"}),type:"radio",onChange:function(e){d(e)},children:[t.map(function(e){var n=r.find(function(n){return n.permission===e}),t=n&&n.reason;return(0,en.jsx)(ng.i,{isDisabled:!!n,value:e,alignItems:"start",pt:3,children:(0,en.jsx)(w.kH,{label:t,"aria-label":t,isDisabled:!n,placement:"top",children:(0,en.jsxs)(p.xu,{children:[(0,en.jsx)(F.x,{mt:-1,children:nj[e].title()}),(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.500",mt:1,children:nj[e].description()})]})},e)},e)}),u&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(nv.R,{}),(0,en.jsx)(nb.s,{color:"red.500",onClick:u,icon:(0,en.jsx)(_.G,{icon:nu.$,fixedWidth:!0}),children:(0,en.jsx)(s.cC,{id:"t/YqKh"})})]})]})})]})},nC=t(15241);function nO(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function n_(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nO(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nO(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nw=(0,na.E)(p.xu),nI=function(e,n,t){if(!t)return e;var i=(0,em.Z)(e),r=e.findIndex(function(e){return"email"in e&&e.email===t}),o=n.find(function(e){return e.email===t});return -1!==r&&i.splice(r,1),[].concat((0,em.Z)(i),[o||{email:t}])},nA=function(e,n){var t=(0,nd.Hs)(n.map(function(e){return"displayName"in e?e.displayName:e.email}),3);return e===A.y3$.Manage?eL.ag._({id:"4bKxWq",values:{0:n.length,userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}):e===A.y3$.Edit?eL.ag._({id:"3rbi6Y",values:{0:n.length,userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}):e===A.y3$.Comment?eL.ag._({id:"uGWY40",values:{0:n.length,userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}):e===A.y3$.View?eL.ag._({id:"p5IG6F",values:{0:n.length,userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}):eL.ag._({id:"Ai1TAT",values:{0:n.length,userNames:t,GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})},nP=function(e){var n,t=e.workspaceId,i=e.docId,r=e.user,o=e.existingDocCollaborators,a=e.existingInvitations,c=e.registerDoneFn,l=e.isDisabled,d=(0,U.p)(),u=(0,I.useState)(!1),f=u[0],h=u[1],m=(0,I.useRef)(),x=(0,I.useRef)(null),g=(0,I.useState)(""),v=g[0],j=g[1],y=(0,I.useState)([]),O=y[0],P=y[1],k=(0,I.useState)(A.y3$.Manage),D=k[0],E=k[1],R=(0,I.useState)(new nl.B),T=R[0],M=R[1],G=(0,I.useState)([]),z=G[0],Z=G[1],V=z.filter(function(e){return"email"in e}),W=o.map(function(e){return e.user}),$=(0,ni.q)({id:"unsentInvitationsModalDisclosure"}),K=$.isOpen,q=$.onOpen,B=$.onClose,H=(0,A.qVw)(),X=(0,N.Z)(H,2),J=X[0],Q=X[1],ee=Q.loading,et=Q.error;(0,eH.GJ)("Error inviting collaborators.",et);var ei=(0,ns.j)(A.aAR),er=(0,A.PGi)({variables:{query:v,workspaceId:t},skip:!v}),eo=er.data,ea=er.loading;(0,I.useEffect)(function(){!ea&&eo&&P(eo.search.filter(Boolean))},[eo,ea]);var es=(0,I.useMemo)(function(){return v?O.filter(function(e){return"User"===e.__typename&&e.id!==r.id&&!V.concat(W).find(function(n){return n.email===e.email})}):[]},[O,W,v,V,r.id]),ec=!!v&&!es.find(function(e){return e.email===v}),el=D===A.y3$.Manage&&V.some(function(e){return!("__typename"in e&&"User"===e.__typename)}),ed=z.concat({email:v}).filter(function(e){return!("email"in e)||(0,no.G)(e.email||"")}),eu=!!z.length,ep=!!ed.length;(0,I.useEffect)(function(){c(function(){return function(){return ep?q():T.resolve(),T.promise}})},[c,T,ep,q]);var ef=(0,I.useCallback)((n=(0,S.Z)(L().mark(function e(n){var i;return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),Z(function(e){return n.reduce(function(e,n){return nI(e,es,n.trim())},e)}),e.next=4,Promise.all(n.map(function(e){return ei({workspaceId:t,query:e}).then(function(n){var t;return null===(t=n.data)||void 0===t?void 0:t.search.find(function(n){return"User"===n.__typename&&n.email===e})})}));case 4:i=e.sent.filter(Boolean),Z(function(e){return n.reduce(function(e,n){return nI(e,i,n.trim())},e)}),h(!1);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[es,ei,t]),eh=(0,I.useCallback)((0,S.Z)(L().mark(function e(){var n,t,s;return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==V.length){e.next=2;break}return e.abrupt("return");case 2:return n=nI(V,es,v.trim()).filter(function(e){return"email"in e&&(0,no.G)(e.email||"")}),t=[].concat((0,em.Z)(o),(0,em.Z)(n.map(function(e){if("id"in e)return{docId:i,user:e,guest:!1,permission:D,__typename:"DocCollaborator"}}))).filter(function(e){return!!e}),s=[].concat((0,em.Z)(a),(0,em.Z)(n.map(function(e){if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:r,docId:i,email:e.email,permission:D,__typename:"DocInvitation"}}))).filter(function(e){return!!e}),e.abrupt("return",J({variables:{docId:i,collaborators:n.map(function(e){var n={permission:D};return n_(n_({},"id"in e?{userId:e.id}:{email:e.email}),n)})},update:function(e,n){var t=n.data;e.writeFragment({id:"Doc:".concat(i),fragment:A.yAO,data:null==t?void 0:t.addCollaborators})},optimisticResponse:{addCollaborators:{id:i,collaborators:t,invitations:s}}}).then(function(){d({title:eL.ag._({id:"Ka86rB",values:{0:n.length}}),description:nA(D,n),status:"success",duration:5e3,isClosable:!0,position:"top"})}));case 6:case"end":return e.stop()}},e)})),[J,i,v,D,es,V,o,a,d,r]),ex=(0,I.useCallback)((0,S.Z)(L().mark(function e(){return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([eh()]).then(function(){var e;Z([]),j(""),null===(e=m.current)||void 0===e||e.resetItems(!0),T.resolve(),M(new nl.B)}).catch(function(e){console.warn(e)}));case 1:case"end":return e.stop()}},e)})),[eh,T]),eg=l||ee||f;return(0,en.jsxs)(e4.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,en.jsx)(p.xu,{flex:1,children:(0,en.jsxs)(e6.B,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,en.jsx)(C.k,{display:f?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:"gray.300",zIndex:"overlay",opacity:.4,children:(0,en.jsx)(e7.$,{})}),(0,en.jsxs)(e8.AutoComplete,{ref:m,values:z,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:function(e,n){return!V.find(function(e){return e.email===n})},onSelectOption:function(e){var n=e.item;"collaborator"===n.originalValue.type&&Z(function(e){return nI(e,es,n.value)}),j("")},onTagRemoved:function(e){Z(function(n){return(0,em.Z)(n).filter(function(n){return"email"in n?n.email!==e:!("id"in n)||n.id!==e})})},children:[(0,en.jsxs)(e9.Z,{pointerEvents:"none",color:"gray.300",h:"100%",flexDirection:"column",children:[(0,en.jsx)(C.k,{flex:1}),(0,en.jsx)(C.k,{h:10,py:4,alignItems:"center",children:(0,en.jsx)(e3.W,{w:10})})]}),(0,en.jsx)(e8.AutoCompleteInput,{ref:x,"data-testid":"autocomplete-collaborators-input",cursor:eg?"not-allowed":void 0,disabled:eg,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:eL.ag._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:v,onKeyDown:function(e){if("Backspace"===e.key&&0===v.length&&z.length>0){var n,t=z.slice(-1).pop();t&&(null===(n=m.current)||void 0===n||n.removeItem("email"in t?t.email:t.id))}},onPaste:function(e){e.preventDefault(),e.stopPropagation(),ef(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),j(""),P([])},onChange:function(e){var n=e.target.value;j(n),n||P([])},children:z.map(function(e,n){return(0,en.jsx)(nC.L,{idx:n,selectedCollaborator:e,handleRemoveClick:function(){var n;null===(n=m.current)||void 0===n||n.removeItem(e.email)}},"id"in e?e.id:e.email)})}),(0,en.jsx)(e8.AutoCompleteList,{w:"100%",mt:0,display:v.length>0?"flex":"none",children:es.map(function(e){var n=e.id,t=e.email,i=e.displayName,r=e.profileImageUrl;return(0,en.jsx)(e8.AutoCompleteItem,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(n),value:{email:t,type:"collaborator"},getValue:function(e){return e.email},align:"center",_focus:{bg:"trueblue.50"},children:(0,en.jsxs)(Y.U,{children:[(0,en.jsx)(eV.q,{size:"sm",name:i,src:r}),(0,en.jsxs)(p.xu,{children:[(0,en.jsx)(F.x,{textTransform:"capitalize",children:i}),(0,en.jsx)(F.x,{fontSize:"xs",color:"gray.500",children:null==t?void 0:t.toLowerCase()})]})]})},n)}).concat((0,en.jsx)(e8.AutoCompleteItem,{value:{email:v,type:"collaborator"},align:"center",display:ec?"flex":"none",_focus:{bg:"trueblue.50"},children:(0,en.jsxs)(Y.U,{children:[(0,en.jsx)(p.Cd,{bg:"trueblue.100",size:8,children:(0,en.jsx)(_.G,{icon:eM.FU})}),(0,en.jsx)(F.x,{size:"md",children:v})]})},v))})]}),(0,en.jsx)(nr.p,{in:eu,unmountOnExit:!0,children:(0,en.jsx)(e9.x,{w:"auto",justifyContent:"flex-end",pr:1,children:(0,en.jsx)(ny,{isDisabled:ee,options:[A.y3$.Manage,A.y3$.Edit,A.y3$.Comment,A.y3$.View],variant:"ghost",selected:D,onClick:function(e){return E(e)}})})})]})}),(0,en.jsx)(nw,{overflowX:"hidden",mr:-2,transition:"slow",animate:{maxWidth:eu?"200px":"0px"},children:(0,en.jsx)(w.kH,{label:(0,en.jsx)(s.cC,{id:"Rxin92"}),"aria-label":eL.ag._({id:"Rxin92"}),isDisabled:!el,placement:"top",children:(0,en.jsx)(p.xu,{children:(0,en.jsx)(b.z,{variant:"solid",onClick:ex,isDisabled:!ep||el,isLoading:ee,"data-testid":"add-selected-items",children:(0,en.jsx)(s.cC,{id:"m16xKo"})})})})}),(0,en.jsx)(nc.C,{invitationCount:ed.length,onDiscardClick:function(){B(),T.resolve(),M(new nl.B)},onSendInvitationsClick:function(){B(),ex()},onClose:function(){B(),T.reject(),M(new nl.B)},isOpen:K})]})},nk=function(e){var n=e.title,t=e.subtitle,i=e.img,r=e.isDisabled,o=e.disabledText,a=e.tooltipText,s=e.testId,c=e.infoIcon,l=e.permissionsControl,d=e.workspaceGuestInvite,u="string"==typeof t?(0,en.jsx)(F.x,{fontSize:"xs",color:"gray.500",children:t}):t,f=(0,en.jsx)(w.kH,{isDisabled:!a,label:a,placement:"top",children:(0,en.jsx)(p.xu,{children:l})});return(0,en.jsxs)(Y.U,{w:"100%",justify:"space-between",py:2,"data-testid":"permission-settings-row".concat(s?"-"+s:""),children:[(0,en.jsx)(p.xu,{children:(0,en.jsxs)(C.k,{alignItems:"center",children:[i,(0,en.jsxs)(p.xu,{ml:3,children:[(0,en.jsx)(F.x,{children:n}),(0,en.jsxs)(C.k,{align:"center",children:[d&&d,u&&u]})]})]})}),(0,en.jsx)(p.xu,{children:(0,en.jsx)(w.kH,{isDisabled:!a,label:(0,en.jsx)(F.x,{children:a}),placement:"top",children:void 0!==r&&r?(0,en.jsx)(F.x,{size:"sm",color:"gray.500","data-testid":"permission-controls-disabled-".concat(s),children:o}):c?(0,en.jsxs)(Y.U,{children:[c,f]}):f})})]})},nD=t(82269),nE=["children","showDivider"];function nR(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function nS(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nR(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nR(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nN=function(e){var n=e.children,t=e.showDivider,i=(0,nD.Z)(e,nE);return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ep.g,nS(nS({spacing:1,align:"stretch",py:4},i),{},{children:n})),(void 0===t||t)&&(0,en.jsx)(h.i,{})]})},nT=function(e){var n=e.subtitle,t=e.tooltipLabel,i=e.ariaLabel,r=e.icon;return(0,en.jsxs)(Y.U,{spacing:1,align:"center",children:[(0,en.jsx)(F.x,{fontSize:"xs",color:"gray.500",children:n}),(0,en.jsx)(w.kH,{label:t,placement:"top","aria-label":i,children:(0,en.jsx)(p.xu,{color:"gray.500",lineHeight:"1",children:(0,en.jsx)(_.G,{size:"xs",icon:r})})})]})},nM=t(43794),nG=t(54728),nL=t(51434),nz=t(91333),nU=t(10344),nF=t(23742),nZ=t(83897),nV=function(e){var n=e.email,t=e.name,i=e.workspaceName,r=e.workspaceId,o=(0,A.f4M)(),a=(0,N.Z)(o,1)[0],c=(0,I.useState)(!1),l=c[0],d=c[1],u=(0,U.p)();return(0,en.jsx)(nG.J,{closeOnBlur:!0,children:function(e){var o=e.onClose;return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(nL.x,{children:(0,en.jsx)(b.z,{leftIcon:(0,en.jsx)(_.G,{icon:nM.Gg}),size:"xs",colorScheme:"gray",mr:1,px:2,h:"auto",py:1,children:(0,en.jsx)(s.cC,{id:"O1wAlQ"})})}),(0,en.jsxs)(nz.y,{bg:"white",children:[(0,en.jsx)(nU.Q,{}),(0,en.jsx)(nF.Y,{fontWeight:"bold",children:(0,en.jsx)(s.cC,{id:"XYV7FR"})}),(0,en.jsxs)(nZ.b,{children:[(0,en.jsx)(F.x,{fontSize:"sm",children:(0,en.jsx)(s.cC,{id:"hJZ5XP",values:{name:t,workspaceName:i,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:X.aq}})}),(0,en.jsx)(b.z,{isDisabled:l,w:"100%",mt:2,onClick:function(){r&&n&&(d(!0),a({variables:{workspaceId:r,invitees:[{email:n}]}}).then(function(){u({title:eL.ag._({id:"oNCcm2"}),status:"success",duration:5e3,isClosable:!0,position:"top"})}).catch(function(e){console.error(e),u({title:eL.ag._({id:"h37zlR",values:{0:e.message}}),status:"error",isClosable:!0,position:"top"})}).finally(function(){d(!1),o()}))},children:(0,en.jsx)(s.cC,{id:"qVqqmP"})})]})]})]})}})};function nW(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function nY(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nW(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nW(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n$=function(){return{view:{subtitle:eL.ag._({id:"ihPQra"}),tooltip:(0,D.tN)()},comment:{subtitle:eL.ag._({id:"qPZYdC"}),tooltip:eL.ag._({id:"oKPro/",values:{0:(0,D.tN)()}})},edit:{subtitle:eL.ag._({id:"TVFcVE"}),tooltip:eL.ag._({id:"2gPY9r",values:{0:(0,D.tN)()}})}}},nK=function(e,n){var t,i,r="DocCollaborator"===e.__typename?null===(t=e.user.displayName)||void 0===t?void 0:t.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",o="DocCollaborator"===n.__typename?null===(i=n.user.displayName)||void 0===i?void 0:i.toUpperCase():"DocInvitation"===n.__typename?n.email.toUpperCase():"";return!o||r&&r<o?-1:!r||o&&r>o?1:0},nq=function(e,n){if(e.permission!==n.permission){if("manage"===e.permission)return -1;if("manage"===n.permission)return 1}return nK(e,n)},nB=function(e){var n,t,i,r=e.workspaceId,a=e.isFromOtherOrg,c=e.doc,l=e.user,d=e.setVerifySearchDone,u=e.canManage,f=(0,eK.A)(n$),h=(0,U.p)(),m=(0,eX._)(eQ.H.hasDismissedDocWorkspaceNotice,!1),x=(0,N.Z)(m,2),g=x[0],v=(x[1],(0,I.useState)(!1)),b=v[0],j=v[1],y=(0,A.$gs)().isConnected,O=(0,A.qVw)(),P=(0,N.Z)(O,2),k=P[0],D=P[1].error,R=(0,A.mrc)(),S=(0,N.Z)(R,2),M=S[0],G=S[1].error;(0,eH.GJ)("Error updating collaborator.",D),(0,eH.GJ)("Error removing collaborator.",G);var L=(0,A.rIg)(),z=(0,N.Z)(L,1)[0],Z=(0,A.kTH)(),V=(0,N.Z)(Z,1)[0],W=null==c?void 0:null===(n=c.accessLinks)||void 0===n?void 0:n[0],$=(0,I.useMemo)(function(){return(0,eJ.Gn)({docTitle:null==c?void 0:c.title,docId:null==c?void 0:c.id,token:null==W?void 0:W.token,absolute:!0})},[c,null==W?void 0:W.token]),K=u&&y,q=!a,B=(q&&(g||!c||c.orgAccess),!!(!(null!=c&&c.orgAccess)&&(null==c?void 0:c.channels)&&(null==c?void 0:c.channels.length)>0&&(null==c?void 0:c.channels.every(function(e){return eY()(e.permission)})))),H=(null==c?void 0:c.orgAccess)==null&&(null==c?void 0:c.publicAccess)==A.y3$.View,J=(0,E.qw)(c),Q=(null==c?void 0:c.collaborators)||[],ee=(null==c?void 0:c.invitations)||[],et=Q.filter(function(e){return e.permission===A.y3$.Manage}).length,ei=[].concat((0,em.Z)(Q),(0,em.Z)(ee)).sort(nq),er=function(e){return function(){h({title:"updated"===e?eL.ag._({id:"Xpw8aE"}):eL.ag._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})}},eo=null!=W&&W.permission?null==W?void 0:W.permission:o.NoAccess,ea=eo===o.NoAccess,es=(null==W?void 0:W.token)==="",ec=W&&W.permission!==A.y3$.View,el=c.orgAccess?c.orgAccess:o.NoAccess,ed=el!==o.NoAccess;return(0,en.jsxs)(en.Fragment,{children:[K&&(0,en.jsx)(nP,{workspaceId:r,docId:c.id,user:l,existingDocCollaborators:Q,existingInvitations:ee,registerDoneFn:d,isDisabled:!u}),(0,en.jsx)(eq.V,{label:(0,en.jsx)(s.cC,{id:"i5bpoc"}),isConnected:y,mb:4}),(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.600",pt:2,children:J}),(0,en.jsxs)(nN,{children:[!1,(0,en.jsx)(nk,{testId:"workspace",title:(0,en.jsx)(s.cC,{id:"wtxjAY"}),subtitle:ed?eL.ag._({id:"aC87LX",values:{0:null==c?void 0:null===(t=c.organization)||void 0===t?void 0:t.name}}):"",img:(0,en.jsx)(e2,{icon:eG.P8,showDisabled:!ed}),isDisabled:!K,disabledText:nj[el].title(),infoIcon:H?(0,en.jsx)(w.kH,{label:(0,en.jsx)(s.cC,{id:"paaewf",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}),placement:"top",children:(0,en.jsx)(p.xu,{color:"yellow.500",children:(0,en.jsx)(_.G,{icon:eT.faCircleInfo})})}):void 0,permissionsControl:(0,en.jsx)(ny,{isDisabled:!K,selected:el,options:[A.y3$.Manage,A.y3$.Edit,A.y3$.Comment,A.y3$.View,o.NoAccess],onClick:function(e){var n={id:c.id,orgAccess:e===o.NoAccess?null:e};z({variables:n,optimisticResponse:{updateDoc:nY(nY({},n),{},{__typename:"Doc"})},refetchQueries:["GetDocs"]}).then(er(e===o.NoAccess?"removed":"updated"))}})}),q&&(null===(i=c.channels)||void 0===i?void 0:i.map(function(e){return(0,en.jsx)(e5,{channel:e,doc:c,isDisabled:!y,showDisabledIcon:B},e.id)})),!!c.orgAccess&&q&&!B&&(0,en.jsx)(p.xu,{w:"100%",mt:2,children:(0,en.jsx)(nt,{existingChannels:c.channels,workspaceId:r,docId:c.id,isDisabled:!y})}),(0,en.jsx)(ez.U,{in:q&&B,children:(0,en.jsxs)(eF.b,{status:"warning",children:[(0,en.jsx)(eZ.z,{}),(0,en.jsx)(s.cC,{id:"RZRM4l",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}})]})})]}),ei&&(0,en.jsx)(nN,{showDivider:u,children:ei.map(function(e){var n=e.permission===A.y3$.Manage&&et<2,t=!K||n,i=n?eL.ag._({id:"0q0LJR"}):void 0,o=nj[e.permission].title();if("DocCollaborator"===e.__typename){var a,s=e.user;return(0,en.jsx)(nk,{testId:s.email,title:"".concat(s.displayName," ").concat(s.id===l.id?eL.ag._({id:"dDUgzP"}):""),img:(0,en.jsx)(eV.q,{name:s.displayName,src:s.profileImageUrl,size:"sm"}),subtitle:t?void 0:s.email,isDisabled:t,disabledText:o,tooltipText:i,workspaceGuestInvite:!t&&e.guest?(0,en.jsx)(nV,{name:s.displayName,workspaceName:null===(a=c.organization)||void 0===a?void 0:a.name,workspaceId:r,email:e.user.email}):void 0,permissionsControl:(0,en.jsx)(ny,{isDisabled:t,selected:e.permission,options:[A.y3$.Manage,A.y3$.Edit,A.y3$.Comment,A.y3$.View],disabledOptions:e.guest?[{permission:A.y3$.Manage,reason:eL.ag._({id:"Rxin92"})}]:[],onClick:function(e){var n={docId:c.id,collaborators:[{userId:s.id,permission:e}]};k({variables:n,optimisticResponse:{addCollaborators:{id:n.docId,collaborators:Q.map(function(n){return nY(nY({},n),{},{permission:n.user.id===s.id?e:n.permission})}),invitations:ee,__typename:"Doc"}}}).then(er("updated")).catch(function(){})},onRemove:function(){var e={docId:c.id,collaborators:[{userId:s.id}]};M({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,collaborators:Q.filter(function(e){return e.user.id!==s.id}),invitations:ee,__typename:"Doc"}}}).then(er("removed"))}})},s.id)}return"DocInvitation"===e.__typename?(0,en.jsx)(nk,{testId:e.email,title:e.email,subtitle:eL.ag._({id:"MActeE"}),img:(0,en.jsx)(p.Cd,{bg:"trueblue.50",size:8,children:(0,en.jsx)(_.G,{icon:eM.FU,size:"sm"})}),isDisabled:t,disabledText:o,permissionsControl:(0,en.jsx)(ny,{selected:e.permission,options:[A.y3$.Manage,A.y3$.Edit,A.y3$.Comment,A.y3$.View],disabledOptions:[{permission:A.y3$.Manage,reason:eL.ag._({id:"Rxin92"})}],onClick:function(n){var t={docId:c.id,collaborators:[{email:e.email,permission:n}]};k({variables:t,optimisticResponse:{addCollaborators:{id:t.docId,invitations:ee.map(function(t){return nY(nY({},t),{},{permission:t.email===e.email?n:t.permission})}),collaborators:Q,__typename:"Doc"}}}).then(er("updated")).catch(function(){console.warn("Error updating permission")})},onRemove:function(){var n={docId:c.id,collaborators:[{email:e.email}]};M({variables:n,optimisticResponse:{removeCollaborators:{id:n.docId,invitations:ee.filter(function(n){return n.email!==e.email}),collaborators:Q,__typename:"Doc"}}}).then(er("removed"))}})},e.email):null})}),u&&(0,en.jsxs)(nN,{showDivider:!1,children:[(0,en.jsx)(nk,{title:(0,en.jsx)(s.cC,{id:"qZu20V"}),subtitle:ea?eL.ag._({id:"vMZPZT"}):(0,en.jsx)(nT,{subtitle:f[eo].subtitle,tooltipLabel:f[eo].tooltip,ariaLabel:f[eo].subtitle,icon:eT.faCircleInfo}),img:(0,en.jsx)(e2,{icon:eN.nN,showDisabled:ea}),isDisabled:!K,disabledText:nj[eo].title(),permissionsControl:(0,en.jsx)(ny,{selected:eo,options:[A.y3$.Edit,A.y3$.Comment,A.y3$.View,o.NoAccess],onClick:function(e){var n=null==W?void 0:W.id,t={id:c.id,accessLinks:e===o.NoAccess?[{permission:null}]:[{permission:e}]};V({variables:t,optimisticResponse:{updateDoc:nY(nY({},t),{},{accessLinks:[{__typename:"AccessLink",id:n||"temp-id",permission:e===o.NoAccess?null:e}],__typename:"Doc"})}}).then(er(e===o.NoAccess?"removed":"updated"))}})}),(0,en.jsxs)(ez.U,{animateOpacity:!0,in:!!(null==W?void 0:W.permission),children:[(0,en.jsx)(e$.I,{url:$,customLabel:eL.ag._({id:"y1eoq1"}),onClick:function(){(0,eB.J)({docId:c.id,source:"sharePanel",type:"tokenUrl"})}}),!es&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ez.U,{in:b,unmountOnExit:!0,children:(0,en.jsxs)(ep.g,{mt:3,align:"stretch",spacing:4,bg:"gray.50",p:6,borderRadius:"md",children:[(0,en.jsxs)(Y.U,{spacing:4,align:"center",children:[(0,en.jsx)(p.xu,{color:"purple.600",children:(0,en.jsx)(_.G,{fixedWidth:!0,icon:eR._1})}),(0,en.jsx)(F.x,{fontSize:"sm",children:(0,en.jsx)(s.cC,{id:"asiJbp"})})]}),(0,en.jsxs)(Y.U,{spacing:4,align:"center",children:[(0,en.jsx)(p.xu,{color:"purple.600",children:(0,en.jsx)(_.G,{fixedWidth:!0,icon:eE.Md})}),(0,en.jsx)(F.x,{fontSize:"sm",display:"inline-block",children:(0,en.jsx)(s.cC,{id:"+g8rkW",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc,GAMMA_PROPER_NOUN:X.N6}})})]}),ec&&(0,en.jsxs)(Y.U,{spacing:4,align:"center",children:[(0,en.jsx)(p.xu,{color:"purple.600",children:(0,en.jsx)(_.G,{fixedWidth:!0,icon:eD.FK})}),(0,en.jsx)(F.x,{fontSize:"sm",children:(0,en.jsx)(s.cC,{id:"NSCwrX",values:{GAMMA_PROPER_NOUN:X.N6,selectedAccessLinkPermission:eo},components:{0:(0,en.jsx)(F.x,{as:"span",fontWeight:"bold"})}})})]})]})}),(0,en.jsx)(C.k,{justify:"center",alignItems:"center",my:3,children:(0,en.jsxs)(Y.U,{spacing:1,as:"button",onClick:function(){return j(!b)},children:[b?(0,en.jsx)(_.G,{fixedWidth:!0,size:"xs",icon:eS.on}):(0,en.jsx)(_.G,{fixedWidth:!0,size:"xs",icon:T.r8}),(0,en.jsx)(F.x,{lineHeight:"normal",marginLeft:"auto",marginRight:"auto",fontSize:"xs",fontWeight:"medium",children:b?(0,en.jsx)(s.cC,{id:"BRvU04"}):(0,en.jsx)(s.cC,{id:"l0Ck42"})})]})})]})]})]})]})},nH=t(46802),nX=t(34638),nJ=function(e){var n=e.visibility,t=e.isFromOtherOrg,i=(0,nX.ff)("white","var(--chakra-colors-gray-900)");return(0,en.jsxs)(en.Fragment,{children:[t&&(0,en.jsx)(_.G,{icon:nM.Gg}),(0,en.jsxs)(p.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,en.jsx)(_.G,{icon:n.primaryIcon}),n.secondaryIcon&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.G,{icon:nH.di,color:i,transform:"down-6 right-6"}),(0,en.jsx)(_.G,{icon:n.secondaryIcon,transform:"shrink-7 right-6 down-6"})]})]})]})},nQ=t(70110),n0=t(2046),n1=t(71193),n2=t(49294),n5=t(25793);function n3(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function n4(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n3(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n6="embed-copied-toast",n7=function(e){var n=e.embedCode,t=e.isDisabled,i=e.docId,r=(0,U.p)(),o=(0,I.useState)(!1),a=o[0],c=o[1],l=(0,n2.V)(n),d=l.hasCopied,u=l.onCopy,p=(0,I.useRef)(null);(0,I.useEffect)(function(){p.current&&a&&(p.current.focus(),p.current.select())},[a]);var f=(0,I.useCallback)(function(){return c(!0)},[]),h=(0,I.useCallback)(function(){return c(!1)},[]),m=(0,I.useCallback)(function(){u(),r.isActive(n6)||r({id:n6,title:(0,en.jsx)(s.cC,{id:"ETv+Uw"}),status:"success",duration:5e3}),(0,eB.J)({docId:i,source:"sharePanel",type:"embed"})},[i,u,r]);return(0,en.jsxs)(ep.g,{spacing:4,align:"stretch",children:[(0,en.jsx)(n5.g,{ref:p,rows:5,variant:"filled",fontFamily:"mono",colorScheme:"gray",disabled:t,onClick:f,onBlur:h,isReadOnly:!0,resize:"none",pointerEvents:t?"none":void 0,children:n}),(0,en.jsx)(b.z,n4(n4({alignSelf:"flex-end",onClick:m,isDisabled:t,size:"sm"},t?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{}),{},{children:d?(0,en.jsx)(s.cC,{id:"6V3Ea3"}):(0,en.jsx)(s.cC,{id:"Sx4kHi"})}))]})};function n9(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function n8(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n9(Object(t),!0).forEach(function(n){(0,R.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n9(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var te=function(e){var n=e.doc,t=e.isSharePublic,i=e.isConnected,r=e.onSharePanelOpen,a=e.onSharePanelClose,c=e.editor,l=(0,U.p)(),d=(0,I.useState)(!!n.publicAccess),u=d[0],f=d[1],h=(0,A.o6I)(),m=(0,N.Z)(h,1)[0],x=(0,I.useMemo)(function(){var e=(0,eJ.Gn)({docId:n.id,docTitle:n.title,path:"public",absolute:!0});return t?e:(0,eJ.lT)({docId:n.id,docTitle:n.title})},[n.id,n.title,t]),g=(0,I.useCallback)(function(e){f(e.target.checked);var t={id:n.id,publicAccess:e.target.checked?A.y3$.View:null};m({variables:t,optimisticResponse:{updateDoc:n8(n8({},t),{},{__typename:"Doc"})}}).then(function(){l({title:e.target.checked?eL.ag._({id:"OnQp1B"}):eL.ag._({id:"e5veeL"}),status:"success",duration:5e3,isClosable:!0,position:"top"})})},[n.id,l,m]),v=n.publicAccess?nj[A.y3$.View].title():nj[o.NoAccess].title(),j=t?(0,en.jsx)(s.cC,{id:"kGj/zu",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc},components:{0:(0,en.jsx)(F.x,{as:"span",borderBottom:"0.125em dashed",borderColor:"gray.400",cursor:"help"}),1:(0,en.jsx)(w.kH,{placement:"top",label:eL.ag._({id:"kni5pb",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}}),"aria-label":"public access is read only"})}}):(0,en.jsx)(s.cC,{id:"RmtWc6",values:{GAMMA_ARTIFACT_PROPER_NOUN:X.Yc}});return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.600",pt:2,children:j}),(0,en.jsx)(nN,{showDivider:!1,children:(0,en.jsx)(nk,{title:(0,en.jsx)(s.cC,{id:"YsO5Wf"}),testId:"public-access",subtitle:(0,en.jsx)(nT,{subtitle:(0,en.jsx)(s.cC,{id:"oEQSnD"}),tooltipLabel:(0,D.tN)(),ariaLabel:eL.ag._({id:"oEQSnD"}),icon:eT.faCircleInfo}),img:(0,en.jsx)(e2,{icon:nQ.Xj}),isDisabled:!i,disabledText:v,permissionsControl:(0,en.jsx)(n0.NI,{children:(0,en.jsx)(n1.r,{id:"public-access",isChecked:u,onChange:g})})})}),(0,en.jsx)(w.kH,{label:t?(0,en.jsx)(s.cC,{id:"RFk/SS"}):(0,en.jsx)(s.cC,{id:"4wpR4l"}),placement:"top",isDisabled:u,children:(0,en.jsx)(p.xu,{children:t?(0,en.jsx)(e$.I,{isDisabled:!n.publicAccess,url:x,customLabel:eL.ag._({id:"FO91Ip"}),onClick:function(){(0,eB.J)({docId:n.id,source:"sharePanel",type:"public"})}}):(0,en.jsx)(n7,{embedCode:x,isDisabled:!u,docId:n.id})})}),t&&c&&(0,en.jsx)(F.x,{fontSize:"sm",color:"gray.500",mt:4,children:(0,en.jsx)(s.cC,{id:"a9n+CI",components:{0:(0,en.jsx)(b.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){a(),e_.pw.emit(e_.TI.OPEN_PAGE_SETUP,"preview")}})}})}),(0,en.jsx)(eI.V,{onClose:a,onOpen:r,segmentEvent:J.AA.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,doc:n})]})},tn=function(e){var n,t=e.doc,i=e.editor,r=e.isSharePanelOpen,o=e.onSharePanelClose,R=e.onSharePanelOpen,S=e.onAnalyticsPanelOpen,N=e.view,T=e.setView,M=e.showAnalytics,G=e.showSharePublic,L=e.showEmbed,z=(0,k._O)(),U=(0,I.useRef)(!1),F=(0,ee.SE)(),Z=F.user,V=F.currentWorkspace,W=(0,A.$gs)().isConnected,Y=(0,ee.py)("manage",t),$=Y&&S,K=(0,P.M)({id:"create-site-modal"}),q=K.isOpen,B=K.onOpen,H=K.onClose,X=(0,D.ei)({showSharePublic:void 0===G||G,showEmbed:void 0===L||L,showWebsites:z&&!(0,ec.s2)()}),J=(0,I.useState)(function(){return function(){return Promise.resolve()}}),Q=J[0],et=J[1],ei=(0,I.useCallback)(function(){Q().then(function(){T("invite"),o()},function(){console.debug("[handleSharePanelClose] CollaboratorSearchBar rejected \uD83D\uDC4E\uD83C\uDFFC")})},[T,o,Q]),er=(0,I.useCallback)(function(){S&&(o(),S())},[S,o]);if(!Z)return null;var eo=(0,E.h_)(t,Z),el=eo?(0,E.Xp)()[eo]:null,ed=(0,E.Gi)(t,V);if(t&&null===el)return console.error("[SharePanel] Unknown VisibilityValue for doc",t),null;var eu=null==t?void 0:null===(n=t.organization)||void 0===n?void 0:n.id;return!t||eu||U.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:t.id,organization:t.organization}),U.current=!0),(0,en.jsxs)(w.Wk,{isDark:!1,children:[(0,en.jsxs)(c.u_,{onEsc:ei,isOpen:r,onClose:o,trapFocus:!1,size:"3xl",returnFocusOnClose:!1,children:[(0,en.jsx)(l.Z,{}),(0,en.jsxs)(d.h,{"data-share-panel-modal-content":!0,mx:2,children:[(0,en.jsxs)(u.x,{children:[el&&(0,en.jsx)(p.xu,{as:"span",mr:3,children:(0,en.jsx)(nJ,{visibility:el,isFromOtherOrg:ed})}),t?(0,en.jsx)(s.cC,{id:"xy569a",values:{0:t.title}}):(0,en.jsx)(s.cC,{id:"Z8lGw6"})]}),(0,en.jsx)(f.o,{"data-share-panel-close-button":!0,onClick:function(e){e.preventDefault(),ei()}}),(0,en.jsx)(h.i,{}),t?(0,en.jsx)(m.f,{pb:6,"data-testid":"share-panel-modal-body",children:t&&eu&&(0,en.jsxs)(en.Fragment,{children:[Y&&(0,en.jsx)(v.E,{my:4,children:X.map(function(e){var n=e.viewKey,t=e.icon,i=e.ariaLabel,r=e.label,o=e.isBeta,a=N===n;return(0,en.jsx)(v.U,{children:(0,en.jsx)(b.z,{leftIcon:(0,en.jsx)(_.G,{icon:t,"aria-label":i}),variant:"ghost",size:"sm",fontWeight:"600",bg:a?"trueblue.50":"transparent",color:a?"trueblue.500":"gray.600",onClick:function(){return T(n)},rightIcon:o?(0,en.jsx)(j.C,{colorScheme:"green",children:(0,en.jsx)(s.cC,{id:"YBt9YP"})}):void 0,children:r})},n)})}),(!Y||"invite"==N)&&(0,en.jsx)(nB,{workspaceId:eu,doc:t,user:Z,setVerifySearchDone:et,canManage:Y,isFromOtherOrg:ed}),Y&&("public"===N||"embed"===N)&&(0,en.jsx)(te,{doc:t,isSharePublic:"public"==N,isConnected:W,onSharePanelOpen:R,onSharePanelClose:o,editor:i}),Y&&"export"===N&&(0,en.jsx)(eA,{doc:t,editor:i,onSharePanelOpen:R,onSharePanelClose:o}),z&&Y&&"website"===N&&(0,en.jsx)(ea,{doc:t,onCreateSiteClick:B})]})}):(0,en.jsx)(m.f,{pb:6,"data-testid":"share-panel-modal-body",children:(0,en.jsxs)(x.K,{children:[(0,en.jsx)(g.O,{height:"55px"}),(0,en.jsx)(g.O,{height:"55px"}),(0,en.jsx)(g.O,{height:"55px"}),(0,en.jsx)(g.O,{height:"55px"})]})}),(0,en.jsx)(h.i,{}),(0,en.jsx)(y.m,{children:(0,en.jsxs)(C.k,{justifyContent:"space-between",flex:1,children:[(void 0===M||M)&&$&&(0,en.jsx)(b.z,{isDisabled:!W,leftIcon:(0,en.jsx)(_.G,{icon:a.M}),variant:"ghost",onClick:er,children:(0,en.jsx)(s.cC,{id:"YaUqUV"})}),(0,en.jsx)(O.L,{}),(0,en.jsx)(b.z,{onClick:function(e){e.preventDefault(),ei()},variant:"solid",children:(0,en.jsx)(s.cC,{id:"DPfwMq"})})]})})]})]}),(null==t?void 0:t.id)&&z&&Y&&q&&(0,en.jsx)(es.M,{isOpen:q,onClose:H,existingDoc:t})]})}},34396:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(12741),r=t(81333),o=t(55452),a=t(55479),s=t(2784),c=t(23313),l=t(75085),d=t(52322),u=function(){var e=(0,a.p)(),n=(0,c.yx3)({refetchQueries:["GetChannelDocActivity","GetChannels"]}),t=(0,r.Z)(n,1)[0];return{addDocChannel:(0,s.useCallback)(function(n){var r=n.docId,a=n.doc,s=n.channel,u=n.existingChannels,p=void 0===u?[]:u,f=r||(null==a?void 0:a.id);if(!f){console.error("Invalid docid");return}var h={input:{docId:f,sharing:[{op:c.Bdm.Add,path:"/channels",value:[{channelId:s.id}]}]}},m=(null==a?void 0:a.title)||l.Yc,x=[].concat((0,i.Z)(p),[{id:s.id,slug:s.slug,name:s.name,permission:c.y3$.Comment}]).sort(function(e,n){return e.slug.localeCompare(n.slug,"en")});t({variables:h,update:function(e,n){var t=n.data;e.writeFragment({id:"Doc:".concat(f),fragment:c.IiT,data:null==t?void 0:t.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:h.input.docId,channels:x}}}).then(function(){e({title:(0,d.jsx)(o.cC,{id:"7hDHpt",values:{title:m}}),description:(0,d.jsx)(o.cC,{id:"A2xcFn",values:{0:s.name,GAMMA_ARTIFACT_PROPER_NOUN:l.Yc}}),status:"success",duration:5e3,isClosable:!0,position:"top"})},function(n){e({title:(0,d.jsx)(o.cC,{id:"bLdU0Q",values:{0:s.name,title:m}}),description:n.message,duration:null,status:"error",isClosable:!0,position:"top"})})},[t,e]),removeDocChannel:(0,s.useCallback)(function(n,i){if(i){var r,a={input:{docId:n.id,sharing:[{op:c.Bdm.Remove,path:"/channels",value:[{channelId:i}]}]}};t({variables:a,update:function(e,t){var i=t.data;e.writeFragment({id:"Doc:".concat(n.id),fragment:c.P6u,data:null==i?void 0:i.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:a.input.docId,channels:null===(r=n.channels)||void 0===r?void 0:r.filter(function(e){return e.id!==i})}}}).then(function(){e({title:(0,d.jsx)(o.cC,{id:"qsnpV6",values:{GAMMA_ARTIFACT_PROPER_NOUN:l.Yc}}),status:"success",duration:1e4,position:"top"})}).catch(function(n){e({title:(0,d.jsx)(o.cC,{id:"+yMzgs"}),description:n.message,status:"error",duration:3e3,isClosable:!0,position:"top"}),console.error("[addRemoveDocChannel] Error removing channel:",n.message)})}},[t,e])}}},92779:function(e,n,t){t.d(n,{Gi:function(){return j},Xp:function(){return O},h_:function(){return _},nZ:function(){return A},qw:function(){return w},uG:function(){return P}});var i=t(12741),r=t(95235),o=t(52622),a=t(11530),s=t(53110),c=t(70110),l=t(43794),d=t(60239),u=t(60670),p=t(76547),f=t(61751),h=t(55452),m=t(87254),x=t(75085),g=t(16092),v=t(51823),b=t(52322),j=function(e,n){var t;return(null==e?void 0:null===(t=e.organization)||void 0===t?void 0:t.id)!==(null==n?void 0:n.id)},y={PRIVATE:"private",LINK_VIEW:"link-view",LINK_COMMENT:"link-comment",LINK_EDIT:"link-edit",INDIVIDUAL:"individual",ORG_VIEW:"org-view",ORG_COMMENT:"org-comment",ORG_EDIT:"org-edit",ORG_MANAGE:"org-manage",CHANNEL_PRIVATE:"channel-private",PUBLIC:"public"},C=[y.ORG_VIEW,y.ORG_COMMENT,y.ORG_EDIT,y.ORG_MANAGE],O=function(){var e;return e={},(0,r.Z)(e,y.PRIVATE,{title:function(){return m.ag._({id:"IZiYjM",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},subtitle:function(){return m.ag._({id:"nHujJB",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},primaryIcon:s.by}),(0,r.Z)(e,y.LINK_VIEW,{title:function(){return m.ag._({id:"Pb5t/X",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},primaryIcon:f.nN}),(0,r.Z)(e,y.LINK_COMMENT,{title:function(){return m.ag._({id:"FUtIA5",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},primaryIcon:f.nN}),(0,r.Z)(e,y.LINK_EDIT,{title:function(){return m.ag._({id:"tNOSZi",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},primaryIcon:f.nN}),(0,r.Z)(e,y.INDIVIDUAL,{title:function(){return m.ag._({id:"IB6oAl",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},subtitle:function(e){return"".concat(e," can access this ").concat(x.Yc,".")},primaryIcon:a.IL}),(0,r.Z)(e,y.ORG_VIEW,{title:function(e){return m.ag._({id:"S+losC",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc,org:e}})},primaryIcon:o.P8,secondaryIcon:p.Md}),(0,r.Z)(e,y.ORG_COMMENT,{title:function(e){return m.ag._({id:"acq2w5",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc,org:e}})},primaryIcon:o.P8,secondaryIcon:u.Mz}),(0,r.Z)(e,y.ORG_EDIT,{title:function(e){return m.ag._({id:"FFdz7p",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc,org:e}})},primaryIcon:o.P8,secondaryIcon:d.Tz}),(0,r.Z)(e,y.ORG_MANAGE,{title:function(e){return m.ag._({id:"3yNlmN",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc,org:e}})},primaryIcon:o.P8}),(0,r.Z)(e,y.CHANNEL_PRIVATE,{title:function(){return m.ag._({id:"Tw6Jzi"})},primaryIcon:g.Ty}),(0,r.Z)(e,y.PUBLIC,{title:function(){return m.ag._({id:"NMHF69",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},primaryIcon:c.Xj}),e},_=function(e,n){var t;return e?null!=e&&e.publicAccess?y.PUBLIC:(null==e?void 0:e.orgAccess)==="manage"?y.ORG_MANAGE:(null==e?void 0:e.orgAccess)==="edit"?y.ORG_EDIT:(null==e?void 0:e.orgAccess)==="comment"?y.ORG_COMMENT:(null==e?void 0:e.orgAccess)==="view"?y.ORG_VIEW:null!=e&&e.channels&&e.channels.some(function(e){return null!==e.permission})?y.CHANNEL_PRIVATE:null!=e&&e.collaborators&&(null==e?void 0:null===(t=e.collaborators)||void 0===t?void 0:t.length)>1?y.INDIVIDUAL:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"view"===e.permission&&""===e.token})?y.LINK_VIEW:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"comment"===e.permission&&""===e.token})?y.LINK_COMMENT:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"edit"===e.permission&&""===e.token})?y.LINK_EDIT:P(e,n)?y.PRIVATE:y.INDIVIDUAL:null},w=function(e){return null!=e&&e.publicAccess?m.ag._({id:"gJUdlS",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}}):null!=e&&e.orgAccess?m.ag._({id:"5Ma3Lv",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}}):m.ag._({id:"QbKKqw",values:{GAMMA_ARTIFACT_PROPER_NOUN:x.Yc}})},I=function(e,n,t){if(!n)return[];var r,d,u=(null==e?void 0:null===(r=e.channels)||void 0===r?void 0:r.map(function(e){var n=e.id,t=e.name,i=e.slug;return{id:n,label:t,href:(0,v.j)({id:n,slug:i}),icon:g.Ty}}))||[],p=_(e,n),f=j(e,t),m=f?[{id:"shared-from-external-org",label:null!=e&&null!==(d=e.organization)&&void 0!==d&&d.name?(0,b.jsx)(h.cC,{id:"lFZJ+N",values:{0:e.organization.name}}):(0,b.jsx)(h.cC,{id:"qn35Ez"}),icon:l.Gg,color:"gray.500"}]:[];if(p===y.PUBLIC)return[{id:"public",label:(0,b.jsx)(h.cC,{id:"7d1a0d"}),icon:c.Xj,color:"gray.500"}].concat(m,(0,i.Z)(u));if(p===y.PRIVATE)return[{id:"private",label:(0,b.jsx)(h.cC,{id:"zwBp5t"}),icon:s.by,color:"gray.500"}].concat(m);if(p===y.INDIVIDUAL){var x=(e.collaborators||[]).filter(function(e){return e.user.id!==n.id}).length;return[{id:"collaborators",label:(0,b.jsx)(h.cC,{id:"o2NxSP",values:{numCollaborators:x}}),icon:a.IL,color:"gray.500"}].concat(m)}return f?m:p&&C.includes(p)?[{id:"workspace",label:(0,b.jsx)(h.cC,{id:"0Gd0NU"}),icon:o.P8,color:"gray.500"}].concat(m,(0,i.Z)(u)):u},A=function(e){var n=e.doc,t=e.user,i=e.currentWorkspace,r=e.channelToExclude;return I(n,t,i).filter(function(e){return e.id!==r})},P=function(e,n){var t;return e&&n&&!e.orgAccess&&!e.publicAccess&&(null===(t=e.createdBy)||void 0===t?void 0:t.id)===n.id}},27901:function(e,n,t){t.d(n,{M:function(){return E}});var i=t(20406),r=t(81333),o=t(28526),a=t.n(o),s=t(55452),c=t(87254),l=t(55479),d=t(20010),u=t(56915),p=t(48273),f=t(92619),h=t(64827),m=t(2167),x=t(71354),g=t(2046),v=t(70287),b=t(27777),j=t(80353),y=t(76648),C=t(45650),O=t(55966),_=t(5632),w=t(2784),I=t(23313),A=t(76394),P=t(42879),k=t(10710),D=t(52322),E=function(e){var n=e.isOpen,t=e.onClose,o=e.existingDoc,E=(0,l.p)(),R=(0,w.useRef)(null),S=(0,w.useState)(!1),N=S[0],T=S[1],M=(0,k.SE)().currentWorkspace,G=(0,w.useState)(""),L=G[0],z=G[1],U=(0,I.V$$)(),F=(0,r.Z)(U,1)[0],Z=(0,I.So6)(),V=(0,r.Z)(Z,1)[0],W=(0,A.b)(),Y=(0,_.useRouter)().push,$=(0,w.useCallback)((0,i.Z)(a().mark(function e(){var n,t,i,r,l,d;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=o&&o.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,P.iL)(o.id);case 4:return T(!0),e.prev=5,e.next=8,V({variables:{duplicateDocInput:{sourceDocId:o.id,source:I.L17.SitesCopyToSite,title:(null==o?void 0:o.title)||c.ag._({id:"wja8aL"}),orgId:null==M?void 0:M.id,orgAccess:I.y3$.Manage,themeId:null}}});case 8:if(r=null==(i=e.sent.data)?void 0:null===(n=i.duplicateDoc)||void 0===n?void 0:n.id){e.next=14;break}return console.error("[CreateSiteModal] Failed to duplicate doc with id",o.id),e.abrupt("return");case 14:return e.next=16,F({variables:{input:{workspaceId:null==M?void 0:M.id,name:L,routes:[{docId:r,path:"/"}],themeId:null==o?void 0:null===(t=o.theme)||void 0===t?void 0:t.id}}});case 16:if(d=null==(l=e.sent.data)?void 0:l.createSite){e.next=22;break}return console.error("[CreateSiteModal] Failed to create site, no site returned"),e.abrupt("return");case 22:Y((0,P.ri)(d.id,d.name)),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(5),E({status:"error",title:(0,D.jsx)(s.cC,{id:"Pdboh4"}),description:(0,D.jsx)(s.cC,{id:"c6YG3V"})}),console.error(e.t0);case 29:T(!1);case 30:case"end":return e.stop()}},e,null,[[5,25]])})),[F,null==M?void 0:M.id,V,o,L,Y,E]),K=(0,w.useCallback)((0,i.Z)(a().mark(function e(){var n,t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,F({variables:{input:{workspaceId:null==M?void 0:M.id,name:L,routes:[]}}});case 3:if(t=null==(n=e.sent.data)?void 0:n.createSite){e.next=9;break}return console.error("[CreateSiteModal] Failed to create site, no site returned"),e.abrupt("return");case 9:W({siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes,title:"Home",path:"/"}).then(function(){Y((0,P.ri)(t.id,t.name)),T(!1)});case 10:case"end":return e.stop()}},e)})),[W,F,null==M?void 0:M.id,L,Y]),q=(0,w.useCallback)((0,i.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!=o&&o.id?$():K());case 1:case"end":return e.stop()}},e)})),[null==o?void 0:o.id,$,K]),B=L.length>0;return(0,D.jsx)(O.Wk,{isDark:!1,children:(0,D.jsxs)(d.u_,{isOpen:n,onClose:t,initialFocusRef:R,size:"2xl",children:[(0,D.jsx)(u.Z,{}),(0,D.jsxs)(p.h,{children:[(0,D.jsx)(f.x,{children:(0,D.jsx)(s.cC,{id:"JHMOcq"})}),(0,D.jsx)(h.o,{}),(0,D.jsx)(m.f,{children:(0,D.jsx)(x.K,{spacing:4,children:(0,D.jsxs)(g.NI,{children:[(0,D.jsx)(v.l,{children:(0,D.jsx)(s.cC,{id:"Lve3H6"})}),(0,D.jsx)(b.I,{ref:R,placeholder:c.ag._({id:"tlD7N3"}),onChange:function(e){z(e.target.value)},onKeyDown:function(e){B&&"Enter"===e.key&&q()}})]})})}),(0,D.jsx)(j.m,{children:(0,D.jsxs)(y.h,{children:[(0,D.jsx)(C.z,{variant:"ghost",onClick:t,children:(0,D.jsx)(s.cC,{id:"dEgA5A"})}),(0,D.jsx)(C.z,{variant:"solid",onClick:q,isDisabled:!B,isLoading:N,children:(0,D.jsx)(s.cC,{id:"JHMOcq"})})]})})]})]})})}},76394:function(e,n,t){t.d(n,{b:function(){return x}});var i=t(20406),r=t(81333),o=t(28526),a=t.n(o),s=t(5632),c=t(2784),l=t(23313),d=t(20252),u=t(42879),p=t(36738),f=t(95173),h=t(33295),m=t(3915),x=function(){var e,n=(0,m.SE)(),t=n.user,o=n.currentWorkspace,x=(0,l.CsQ)(),g=(0,r.Z)(x,1)[0],v=(0,l.qbt)(),b=(0,r.Z)(v,1)[0],j=(0,s.useRouter)().push;return(0,c.useCallback)((e=(0,i.Z)(a().mark(function e(n){var i,r,s,c,m,x,v,y,C;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.title,r=n.path,s=n.siteId,c=n.routes,r.startsWith("/")){e.next=4;break}return console.error("[AddNewPageToSite] Path must start with /. Aborting.",r),e.abrupt("return");case 4:if(!(!(null!=o&&o.id)||!s||!c)){e.next=6;break}return e.abrupt("return");case 6:return m=(0,p.R$)(t,{docFlags:{cardLayoutsEnabled:!0}}),x=(0,h.q)(m),e.next=10,g({variables:{workspaceId:null==o?void 0:o.id,title:i,source:l.L17.SitesAddPage,initialContent:{ydoc:x,schemaVersion:f.bI,editors:[null==t?void 0:t.id]},orgAccess:l.y3$.Manage}});case 10:if(y=null==(v=e.sent.data)?void 0:v.createDoc.id,(0,d.Q)({doc_id:y,source:l.L17.SitesAddPage,channel:null}),!(!s||!y)){e.next=17;break}return console.error("[AddPageModal] Site or doc id is undefined. Cannot add route."),e.abrupt("return");case 17:return e.next=19,b({variables:{input:{siteId:s,docId:y,path:r}},refetchQueries:["GetSite"]});case 19:return C=(0,u.as)(s,y),console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",y),e.next=23,j(C);case 23:return e.abrupt("return",y);case 24:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),[b,g,null==o?void 0:o.id,j,t])}},87063:function(e,n,t){t.d(n,{e:function(){return v}});var i=t(95235),r=t(81333),o=t(55452),a=t(55479),s=t(5632),c=t(2784),l=t(23313),d=t(55562),u=t(32333),p=t(20252),f=t(10710),h=t(95173),m=t(33295),x=t(52322);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var v=function(){var e=(0,l.So6)({refetchQueries:["GetDocs"]}),n=(0,r.Z)(e,1)[0],t=(0,s.useRouter)().push,v=(0,a.p)(),b=(0,f.SE)(),j=b.user,y=b.currentWorkspace,C=(0,u.z$)();return(0,c.useCallback)(function(e){var r,a=e.docId,s=e.docTitle,c=e.initialContent,l=e.channelId,f=e.source,b=e.openThemeEditor,O=e.onSuccess,_=e.newWindow,w=null==j?void 0:null===(r=j.settings)||void 0===r?void 0:r.needsEditorOnboarding;if(!a)return Promise.reject(Error("Cannot duplicate without a docId"));var I=v({id:"duplicate-toast-".concat(a),isClosable:!1,position:"top",status:"loading",variant:"light",duration:null,title:(0,x.jsx)(o.cC,{id:"OvEjsP"})});return j&&null!=y&&y.id?n({variables:{duplicateDocInput:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({orgId:null==y?void 0:y.id,sourceDocId:a,source:d.R[f],initialContent:c?{ydoc:(0,m.q)(c),schemaVersion:h.bI,editors:[null==j?void 0:j.id]}:void 0},l?{channels:[{channelId:l}]}:{})}}).then(function(e){if(!(null!=e&&null!==(n=e.data)&&void 0!==n&&n.duplicateDoc))throw Error("No data received");null==C||C.track(u.AA.EXAMPLE_DUPLICATED,{doc_id:a,title:s,source:f});var n,i,r=(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.duplicateDoc).id;(0,p.Q)({doc_id:r,source:f,source_doc_id:a}),console.debug("[Duplicate.".concat(f,"] Doc duplicated New doc id (").concat(r,"). Navigating to Editor")),v.update(I,{status:"success",description:(0,x.jsx)(o.cC,{id:"zzDlyQ"}),duration:5e3,isClosable:!0});var c=b?"/docs/".concat(r).concat(b?"?openThemeEditor=true":""):w?"/docs/".concat(r,"?tour=true"):"/docs/".concat(r);_?window.open(c,"_blank"):t(c),O&&r&&O(r)},function(e){console.error("[Duplicate.".concat(f,"] Error duplicating doc:"),e.message),v.update(I,{title:(0,x.jsx)(o.cC,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}).catch(function(e){console.error("[Duplicate.".concat(f,"] Error duplicating doc:"),e.message),v.update(I,{title:(0,x.jsx)(o.cC,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}):(console.error("[Duplicate.".concat(f,"] Cannot duplicate without a user or workspace"),{user:j}),Promise.reject(Error("Cannot duplicate without a user or workspace")))},[null==y?void 0:y.id,j,v,n,C,t])}}}]);
//# sourceMappingURL=1617-830f4a640d0d7784.js.map